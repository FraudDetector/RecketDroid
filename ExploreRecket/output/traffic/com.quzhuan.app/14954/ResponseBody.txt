/*! For license information please see vendors~lp-sdk.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{384:function(e,t,n){"use strict";n.r(t);var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function a(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function c(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;function u(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}Object.create;var l,h=window;function p(){return h}function d(e){var t=e.split(".").pop()||"";if(t===e)return"";switch(t=t.toLowerCase()){case"json":case"html":case"txt":return"text/plain";case"mp3":case"ogg":case"wav":return"audio/".concat(t);case"png":case"jpg":case"jpeg":case"bmp":case"gif":case"webp":return"image/".concat(t);case"mp4":return"video/mp4";case"mov":return"video/quicktime";default:return""}}!function(e){e[e.unknown=0]="unknown",e[e.text=1]="text",e[e.image=2]="image",e[e.audio=3]="audio",e[e.video=4]="video"}(l||(l={}));var f=[l[0],l[1],l[2],l[3],l[4]];var v=/^(http(s):\/\/|\/)/i;function m(e,t){return function(n){return e.push(n),t&&t(n),function(){var t=e.indexOf(n);t>-1&&e.splice(t,1)}}}function y(e){return new Promise((function(t){setTimeout(t,e)}))}var g=function(){function e(e,t){var n=this;this._prepare=!1,this._prepareCalled=!1,this._objectUrl="",this._dataUrl="",this._img=null,this._blob=null,this.url=e,this._prepare=Boolean(null==t?void 0:t.prepare),this._fetchOptions=null==t?void 0:t.fetchOptions,this._fetchResource=t.fetchResource,this._loadFailPromise=new Promise((function(e){n._loadFailPromiseFn=e}))}return Object.defineProperty(e.prototype,"prepared",{get:function(){return this._prepare},enumerable:!1,configurable:!0}),e.prototype.load=function(){var e=this;return this._loadPromise||(this._loadPromise=this._fetchResource(this.url,this._fetchOptions).then((function(t){return{arraybuffer:function(){return Promise.resolve(t)},blob:function(){return e.getBlob()},body:function(){return Promise.resolve(t)},dataUrl:function(){return e.getDataUrl()},image:function(){return e.getImage()},json:function(){return e.json()},objectUrl:function(){return e.getObjectUrl()},text:function(){return e.text()}}})),this._loadPromise.then((function(){!e._prepareCalled&&e._prepare&&setTimeout((function(){return e.prepare()}))})).catch((function(){var t;null===(t=e._loadFailPromiseFn)||void 0===t||t.call(e)}))),this._loadPromise},e.prototype.text=function(){return this.getBlob().then((function(e){return function(e){return new Promise((function(t,n){var i=new(p().FileReader);i.onload=function(){t(i.result)},i.onerror=function(e){n(e)},i.readAsText(e)}))}(e)}))},e.prototype.json=function(){return this.text().then((function(e){return JSON.parse(e)}))},e.prototype.getArrayBuffer=function(){return this.load().then((function(e){return e.body()}))},e.prototype.getBlob=function(){var e=this;return this._blob?Promise.resolve(this._blob):this.getArrayBuffer().then((function(t){var n,i,r;return e._blob=(n=t,i=e.url,r=d(i),new(p().Blob)([n],{type:r})),e._blob}))},e.prototype.getObjectUrl=function(){var e=this;return this._objectUrl?Promise.resolve(this._objectUrl):this.getBlob().then((function(t){return e._objectUrl=function(e){var t=p();return(t.URL||t.webkitURL).createObjectURL(e)}(t),e._objectUrl}))},e.prototype.getDataUrl=function(){var e=this;return this._dataUrl?Promise.resolve(this._dataUrl):(this._dataUrlPromise||(this._dataUrlPromise=this.getBlob().then((function(e){return function(e){return new Promise((function(t){var n=new(p().FileReader);n.onload=function(){t(n.result)},n.readAsDataURL(e)}))}(e)})).then((function(t){return e._dataUrl=t,t}))),this._dataUrlPromise)},e.prototype.getImage=function(e){var t=this;return void 0===e&&(e="object-url"),this._img?Promise.resolve(this._img):(this._imgPromise||(this._imgPromise=this.getBlob().then((function(){return("file-reader"===e?t.getDataUrl():t.getObjectUrl()).then((function(e){return function(e){var t=new(p().Image);return new Promise((function(n,i){t.onload=function(){n(t)},t.src=e,t.onerror=function(e){i(e)}}))}(e)})).then((function(e){return t._img=e,e}))}))),this._imgPromise)},e.prototype.prepare=function(){var e=this;this._prepareCalled||(this._prepareCalled=!0,this.load().then((function(t){var n,i,r;switch(n=e.url,i=d(n),r=f.indexOf(i.split("/")[0]),Math.max(0,r)){case l.image:t.image();break;case l.audio:case l.video:t.objectUrl()}})).catch((function(){})))},e.prototype.onLoadError=function(){return this._loadFailPromise},e.prototype.destroy=function(){var e,t;e=this._objectUrl,((t=p()).URL||t.webkitURL).revokeObjectURL(e),this._objectUrl="",this._img=null,this._blob=null,this._loadPromise=null,this._imgPromise=null,this._loadFailPromiseFn=null,this._loadFailPromise=Promise.resolve()},e}();function b(e,t){var n=!1,i=this;return Promise.all(e.map((function(){var e=arguments;return i((function(){if(!n)return t.apply(void 0,e).catch((function(e){throw n=!0,e}))}))})))}function _(e){var t=e;return t.queue=0,t.map=b,t}function w(e){var t,n=0,i=[];function r(){var r;--n<e&&(r=i.shift(),t.queue=i.length,r&&o(r.fn).then(r.resolve).catch(r.reject))}function o(e){n++;try{return Promise.resolve(e()).then((function(e){return r(),e}),(function(e){throw r(),e}))}catch(e){return r(),Promise.reject(e)}}return t=_((function(r){return n>=e?function(e){return new Promise((function(n,r){i.push({fn:e,resolve:n,reject:r}),t.queue=i.length}))}(r):o(r)}))}function C(e){return _(e?w(e):function(e){return e()})}var S=function(){function e(){this._store={},this._queue=[],this._maxSize=-1,this._cleanStrategy="addTime"}return Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._maxSize},set:function(e){this._maxSize=e,this._checkSize()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cleanStrategy",{get:function(){return this._cleanStrategy},set:function(e){this._cleanStrategy=e},enumerable:!1,configurable:!0}),e.prototype.has=function(e){return Boolean(this._store[e])},e.prototype.get=function(e){var t=this._store[e];if(t)return t.count++,t.value},e.prototype.set=function(e,t){this._store[e]?(this._store[e].value=t,this._queue=this._queue.filter((function(t){return e!==t})).concat(e)):(this._store[e]={value:t,count:1},this._queue.push(e)),this._checkSize()},e.prototype.delete=function(e){delete this._store[e];var t=this._queue.indexOf(e);-1!==t&&this._queue.splice(t,1)},e.prototype.clear=function(){this._store={},this._queue=[]},e.prototype._checkSize=function(){var e=this;if(!(this.maxSize<0||this._queue.length<=this.maxSize)){var t=[];switch(this.cleanStrategy){case"frequency":t=Object.keys(this._store).sort((function(t,n){return e._store[n].count-e._store[t].count})).slice(this.maxSize);break;case"addTime":default:t=this._queue.slice(0,this._queue.length-this.maxSize)}t.forEach((function(t){return e.delete(t)}))}},e}(),P=new S;function x(){return new S}function E(e){return!!e&&("object"==typeof e&&((null==e?void 0:e.get)&&(null==e?void 0:e.set)&&(null==e?void 0:e.delete)))}P.maxSize=50;var T=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};function k(e){return new Promise((function(t,n){var i=new(p().XMLHttpRequest);i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){if(4!==i.readyState||200!==i.status&&304!==i.status){var e=new Error("wrong xhr status(".concat(i.status,") or readyState(").concat(i.readyState,")"));n(e)}else t(i.response)},i.onerror=function(e){n(e)},i.send()}))}function O(e,t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return new Promise((function(i,r){var o=1,s=function(){return e.call.apply(e,T([null],n,!1)).then(i).catch((function(e){if(console.warn("run failed for ".concat(o," time(s) with parameters: "),n),o<t)return o++,s();var i=new Error("retry ".concat(t," time(s) out and other error: ").concat(null==e?void 0:e.message));return i.innerError={message:null==e?void 0:e.message,stack:null==e?void 0:e.stack},i.args=n,void r(i)}))};s()}))}}function M(e,t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=!1,o=e.call.apply(e,T([null],n,!1)).then((function(e){return r=!0,e})).catch((function(e){throw r=!0,e})),s=y(t).then((function(){if(!r)throw console.warn("timeout of ".concat(t,"ms with parameters: "),n),new Error("timeout of ".concat(t,"ms with parameters: ").concat(JSON.stringify(n)))})),a=[o,s];return Promise.race(a)}}var R=new(function(){function e(){this._caches=[],this._resources={}}return e.prototype.addCache=function(e){this._caches.includes(e)||this._caches.push(e)},e.prototype.removeCache=function(e){var t=this._caches.indexOf(e);-1!==t&&this._caches.splice(t,1)},e.prototype.addResource=function(e,t){this._resources[e]=t},e.prototype.removeResource=function(e){delete this._resources[e]},e.prototype.removeUncached=function(){var e=this;Object.keys(this._resources).forEach((function(t){e._caches.some((function(n){return n.get(t)===e._resources[t]}))||(e._resources[t].destroy(),delete e._resources[t])}))},e}());R.addCache(P);var I=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._resources={},this._autoPrepare=!1,this._cache=x();var n={resources:[],cache:!1,autoPrepare:!1,concurrency:8,fetchOptions:{retry:2,timeout:7e3},fetchResource:k};if(Array.isArray(e[0])&&(n.resources=e.shift()),e[0]&&"object"==typeof e[0])Object.assign(n,e[0]);else{var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4];n.cache=o||n.cache,n.autoPrepare=i||n.autoPrepare,n.concurrency=r||n.concurrency,Object.assign(n.fetchOptions,a),n.fetchResource=s||n.fetchResource}if(n.fetchResource===k||!n.fetchResource){var c=n.fetchOptions||{},u=c.timeout,l=void 0===u?1/0:u,h=c.retry,p=void 0===h?1:h,d=O(M(k,l),p);n.fetchResource=d}var f=n.autoPrepare,v=n.cache,m=n.resources,y=n.concurrency,g=n.fetchResource;this.options=n,this._autoPrepare=f,this._fetchResource=g,v&&this._enableCache(E(v)?v:void 0),R.addCache(this._cache),this.add(m),this.limit=C(y)}return Object.defineProperty(e.prototype,"resList",{get:function(){return Object.keys(this._resources)},enumerable:!1,configurable:!0}),e.prototype.add=function(e){var t=this;return(Array.isArray(e)?e:[e]).forEach((function(e){t._getResource(e)})),this},e.prototype.remove=function(e){var t=this;return(Array.isArray(e)?e:[e]).forEach((function(e){t._cache.delete(e),R.removeResource(e),delete t._resources[e]})),this},e.prototype.addAny=function(e){var t,n=(t={},function e(n){if(n){if("string"!=typeof n)return Array.isArray(n)?n.forEach(e):void(n&&Object.keys(n)&&Object.keys(n).forEach((function(t){e(n[t])})));v.test(n)&&(t[n]=!0)}}(e),Object.keys(t));return this.add(n)},e.prototype.preload=function(){var e=this,t=Object.keys(this._resources),n=0,i=[],r=t.length,o=!1,s=[],a=[],c=[],u=[],l=m(a,(function(e){o&&e(i,u)}));function h(){n+=1,Promise.resolve().then((function(){return function(){n===r&&(a.forEach((function(e){return e(i,u)})),o=!0);var e=Number((n/r).toFixed(4));s.forEach((function(t){return t(e,n,r)}))}()}))}var p=m(c),d=m(s),f=Promise.all(t.map((function(t){return e.load(t).then((function(e){return h(),e})).catch((function(e){return h(),u.push(t),c.forEach((function(n){return n(t,e)})),null}))}))).then((function(e){return e.filter(Boolean)}));return f.onFinish=l,f.onProgress=d,f.onError=p,f.then((function(e){i=e})),f},e.prototype.load=function(e){var t=this;return this.limit((function(){return t._getResource(e).load()}))},e.prototype.loadImage=function(e){return this.load(e).then((function(e){return e.image()}))},e.prototype.loadText=function(e){return this.load(e).then((function(e){return e.text()}))},e.prototype.loadJson=function(e){return this.load(e).then((function(e){return e.json()}))},e.prototype.loadArrayBuffer=function(e){return this.load(e).then((function(e){return e.arraybuffer()}))},e.prototype.loadBlob=function(e){return this.load(e).then((function(e){return e.blob()}))},e.prototype.loadObjectUrl=function(e){return this.load(e).then((function(e){return e.objectUrl()}))},e.prototype.autoDetect=function(e){return this.addAny(e)},e.prototype.reset=function(){var e=this;Object.keys(this._resources).forEach((function(t){delete e._resources[t]})),this._resources={},this._disableCache(),R.removeUncached()},e.prototype.destroy=function(){this.reset()},e.prototype._getResource=function(e){var t=this;if(this._resources[e])return this._resources[e];var n=this._cache.get(e);if(n)return this._resources[e]=n,R.addResource(e,n),n;var i=new g(e,{prepare:this._autoPrepare,fetchResource:this._fetchResource,fetchOptions:this.options.fetchOptions});return i.onLoadError().then((function(){t.remove(e)})),this._resources[e]=i,R.addResource(e,i),this._cache.set(e,i),i},e.prototype._enableCache=function(e){E(e)?this._cache=e:this._cache=P},e.prototype._disableCache=function(){this._cache!==P&&this._cache!==this.options.cache&&(R.removeCache(this._cache),this._cache.clear()),this._cache=x()},e.shared=new e([],!0,20,!0),e}(),j=n(42),F=n(37),V=function(e,t){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};var A=function(){return(A=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function L(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function N(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;function B(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;function H(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}var U=0;function q(e){return void 0===e&&(e=""),"".concat(e).concat(++U)}var D,z,J="object"==typeof Reflect?Reflect:null;function W(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2]);default:return Function.prototype.apply.call(e,t,n)}}D=J&&"function"==typeof J.ownKeys?J.ownKeys:Object.getOwnPropertySymbols?function(e){return[].concat(Object.getOwnPropertyNames(e)).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},z=J&&"function"==typeof J.deleteProperty?J.deleteProperty:function(e,t){delete e[t]};var G,Y,X,K,Z=function(){function e(){this.__listeners__={}}return e.prototype.on=function(e,t,n){return this._on(e,t,n)},e.prototype.addEventListener=function(e,t,n){return this._on(e,t,n)},e.prototype.addListener=function(e,t,n){return this._on(e,t,n)},e.prototype.off=function(e,t){this._off(e,t)},e.prototype.once=function(e,t){return this._on(e,t,!0)},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this._emit(e,t)},e.prototype.dispatchEvent=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this._emit(e,t)},e.prototype.eventNames=function(){return D(this.__listeners__)},e.prototype.destroy=function(){this.__listeners__={},Object.freeze&&(this.__listeners__=Object.freeze({})),this._on=function(){return H},this._off=H},e.prototype._on=function(e,t,n){var i=this;this.__listeners__[e]=this.__listeners__[e]||[];var r=this.__listeners__[e];if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '.concat(typeof t));if(n){var o=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];t.call.apply(t,B([null],n,!1)),i._off(e,t)};o.__origin_cb__=t,r.push(o)}else r.push(t);return function(){i._off(e,t)}},e.prototype._off=function(e,t){var n=this.__listeners__[e]||[];this.__listeners__[e]=t?n.filter((function(e){return e!==t&&e.__origin_cb__!==t})):[],0===this.__listeners__[e].length&&z(this.__listeners__,e)},e.prototype._emit=function(e,t){if("*"===e)return!1;var n=this.__listeners__[e]||[],i=this.__listeners__["*"]||[];if(0===n.length&&0===i.length)return!1;for(var r=0;r<n.length;r++)W(n[r],this,t);for(r=0;r<i.length;r++){var o=[e].concat(t);W(i[r],this,o)}return!0},e}();function $(){return performance&&performance.now?performance.now():(new Date).getTime()}function Q(){var e=$();return function(){return $()-e}}function ee(e){var t=Q(),n=e.then((function(e){return n.duration=t(),e})).catch((function(e){throw n.duration=t(),e}));return n}function te(e){return new Promise((function(t){return setTimeout(t,e)}))}function ne(e){return G[e]}!function(e){e[e.error=-100]="error",e[e.inited=1]="inited",e[e.bootstrapping=5]="bootstrapping",e[e.bootstrapped=10]="bootstrapped",e[e.pendingRender=12]="pendingRender",e[e.renderingTick=30]="renderingTick",e[e.rendering=34]="rendering",e[e.rendered=38]="rendered",e[e.pendingRunning=50]="pendingRunning",e[e.running=56]="running",e[e.skdStart=70]="skdStart",e[e.compStart=76]="compStart",e[e.finish=90]="finish",e[e.destroyed=100]="destroyed"}(G||(G={})),function(e){e.noComponentConstructor="NO_COMPONENT_CONSTRUCTOR",e.noComponentInstance="NO_COMPONENT_INSTANCE",e.bootstrapFailed="BOOTSTRAP_FAILED",e.renderFailed="RENDER_FAILED"}(Y||(Y={})),function(e){e.muteChangeByUser="MUTE_STATE_CHANGE_BY_USER"}(X||(X={})),function(e){e.loadResourceStart="loadResourceStart",e.loadResourceFinish="loadResourceFinish",e.renderStart="renderStart",e.renderFinish="renderFinish",e.enterSection="enterSection",e.playStart="playStart",e.playFinish="playFinish",e.clickArea="clickArea",e.destroy="destroy"}(K||(K={}));var ie={LOAD_RESOURCE_START:"loadResourceStart",LOAD_RESOURCE_FINISH:"loadResourceFinish",RENDER_START:"renderStart",RENDER_FINISH:"renderFinish",ENTER_SECTION:"enterSection",PLAY_START:"playStart",PLAY_FINISH:"playFinish",CLICK_AREA:"clickArea",DESTROY:"destroy"},re="play-comp-do-not-trigger-sdk-start",oe="RENDER_SIGNAL",se=/^\d+(\.\d+)?%$/;function ae(e,t){if(e>0)return Number(e);if("string"==typeof e&&se.test(e)){var n=e.substr(0,e.length-1),i=t*Number(n)/100;if(!Number.isNaN(i))return i}return 0}function ce(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function ue(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;function le(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;for(var he=["moz","webkit"],pe="AnimationFrame",de=window["request".concat(pe)],fe=window["cancel".concat(pe)]||window["cancelRequest".concat(pe)],ve=0;!de&&ve<he.length;ve++)de=window["".concat(he[ve],"Request").concat(pe)],fe=window["".concat(he[ve],"Cancel").concat(pe)]||window["".concat(he[ve],"CancelRequest").concat(pe)];var me=function(e){return de(e)};me.cancel=function(e){return fe(e)};var ye=me,ge="undefined"==typeof window;function be(){if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)||[];return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||"0",10)]}if("MacIntel"===navigator.platform&&navigator.maxTouchPoints>0){var t=navigator.userAgent.match(/Version\/(\d+)\.?(\d+)?\.?(\d+)?/);if(t&&t.length>1)return t.slice(1).filter(Boolean).map((function(e){return parseInt(e,10)}))}return[]}function _e(){var e=navigator.userAgent.match(/Android [\d+\.]{2,5}/);return e?e[0].replace("Android ","").split(".").map((function(e){return parseInt(e,10)})):[]}var we,Ce=Boolean(be().length),Se=(Boolean(_e().length),!ge&&"ontouchstart"in window),Pe=Se?["touchstart"]:["mousedown"],xe=Se?["touchmove"]:["mousemove"],Ee=le(le([],Pe,!0),["click"],!1),Te=Se?["touchend"]:["mouseup"],ke=("function"==typeof document.all&&document.all,Boolean(window.ResizeObserver),{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"}),Oe="";if("undefined"!=typeof document)for(var Me=document.createElement("div").style,Re=Object.keys(ke),Ie=0,je=Re[Ie];Ie<Re.length;je=Re[Ie+=1])if(je in Me){Oe=ke[je];break}function Fe(e,t){Object.keys(t).forEach((function(n){var i=t[n];e.style[n]=i}))}function Ve(e,t,n,i){return void 0===n&&(n=500),void 0===i&&(i="ease"),ce(this,void 0,void 0,(function(){var r,o,s,a;return ue(this,(function(c){return r="opacity ".concat(n/1e3,"s ").concat(i),Fe(e,{transition:r,webkitTransition:r}),o="in"===t,s=te(n+100),a=new Promise((function(t){ye((function(){Fe(e,{opacity:o?"1":"0"});var n,i,r=(i=function(){Fe(e,{transition:"",webkitTransition:""}),t(),r()},(n=e).addEventListener(Oe,i),function(){return n.removeEventListener(Oe,i)})}))})),[2,Promise.race([s,a])]}))}))}function Ae(e){var t={x:0,y:0},n={x:0,y:0};function i(i){var r="touchstart"===i.type||"mousedown"===i.type?t:n;if("touchstart"===i.type||"touchend"===i.type){var o=i.changedTouches[0];r.x=o.clientX,r.y=o.clientY}else{var s=i;r.x=s.clientX,r.y=s.clientY}if("touchend"===i.type||"mouseup"===i.type){var a=Math.abs(n.x-t.x),c=Math.abs(n.y-t.y);if(a<5&&c<5){var u=new Event("taptap",i);e.dispatchEvent(u)}}}return Pe.concat(Te).forEach((function(t){e.addEventListener(t,i)})),function(){Pe.concat(Te).forEach((function(t){e.removeEventListener(t,i)}))}}function Le(e){var t=document.createElement("div");t.innerHTML=e;var n=t.children[0];return n&&n.parentNode&&n.parentNode.removeChild(n),n}!function(e){e[e.debug=0]="debug",e[e.info=1]="info",e[e.log=2]="log",e[e.warn=3]="warn",e[e.error=4]="error"}(we||(we={}));var Ne=function(){function e(e,t){this._level=we.warn,this._tag="",this._tag="[".concat(e,"]"),void 0!==t&&(this._level=t)}return e.prototype.setLevel=function(e){this._level=e},e.prototype.setTag=function(e){this._tag="[".concat(e,"]")},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._level>we.debug||console.debug.apply(console,le([this._tag],e,!1))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._level>we.log||console.info.apply(console,le([this._tag],e,!1))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.info.apply(this,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._level>we.warn||console.warn.apply(console,le([this._tag],e,!1))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,le([this._tag],e,!1))},e}(),Be=new Ne,He="_mute_line_el",Ue='<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M14 28C21.732 28 28 21.732 28 14C28 6.26801 21.732 0 14 0C6.26801 0 0 6.26801 0 14C0 21.732 6.26801 28 14 28Z" fill="#161823" fill-opacity="0.4"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15 7V21C11.5 21 8.89926 17.4374 8.89926 17.4374H6C5.44772 17.4374 5 16.9897 5 16.4374V11.5042C5 10.9519 5.44772 10.5042 6 10.5042H8.89926C8.89926 10.5042 11.5 7 15 7Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n<line x1="22" y1="6.06066" class="'.concat(He,'" x2="6.06066" y2="22" style="transition: all ease .3s" stroke="white" stroke-width="1.5" stroke-linecap="round"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M17.5454 12.5968C17.6559 12.6857 17.755 12.7839 17.8416 12.8892C18.1033 13.2077 18.25 13.5913 18.25 14C18.25 14.4053 18.1058 14.7857 17.8484 15.1025C17.7572 15.2147 17.6518 15.3189 17.5338 15.4126C17.2093 15.6701 17.1551 16.1419 17.4126 16.4663C17.6701 16.7907 18.1419 16.845 18.4663 16.5875C18.6678 16.4276 18.8512 16.247 19.0126 16.0484C19.4711 15.484 19.75 14.7745 19.75 14C19.75 13.2187 19.4661 12.5036 19.0005 11.937C18.8815 11.7921 18.7507 11.6569 18.6096 11.5325L17.5454 12.5968ZM20.5404 9.60176C20.7874 9.85574 21.0137 10.1379 21.2153 10.4446C21.8613 11.4273 22.25 12.6571 22.25 14C22.25 15.3313 21.868 16.5514 21.232 17.5298C21.0079 17.8747 20.7525 18.189 20.4718 18.4676C20.1777 18.7593 20.1758 19.2342 20.4676 19.5282C20.7593 19.8223 21.2342 19.8242 21.5282 19.5324C21.8866 19.1769 22.209 18.7792 22.4897 18.3472C23.2856 17.1228 23.75 15.6182 23.75 14C23.75 12.3677 23.2774 10.8509 22.4688 9.6207C22.2123 9.23047 21.9216 8.86864 21.6011 8.54102L20.5404 9.60176Z" fill="white"/>\n</svg>\n');var qe,De=function(){function e(e){this._mute=!1,this._ready=!1,this._hasInitd=!1,this._forceMute=!0,this._tapEventProxyCanceller=H,this.options=e,this.controlElement=document.createElement("div"),this.innerElement=document.createElement("div"),this._toggleIsMute=this._toggleIsMute.bind(this),this.muteIcon=function(e){void 0===e&&(e=!1);var t=document.createElement("div");t.innerHTML=Ue;var n=t.querySelector(".".concat(He));function i(e){Fe(n,e?{strokeWidth:"1.5"}:{strokeWidth:"0"})}return i(e),{icon:t.children[0],setMute:i}}(),this.innerElement.appendChild(this.muteIcon.icon)}return Object.defineProperty(e.prototype,"ready",{get:function(){return this._ready},set:function(e){this._ready=e,this.updateMute()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasAudio",{get:function(){return Boolean(this.component.hasAudio)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mute",{get:function(){return this._mute},set:function(e){this._mute=e,this.updateMute()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"forceMute",{get:function(){return this._forceMute},set:function(e){this._forceMute=e,this.updateMute()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMute",{get:function(){return!this.ready||this.forceMute||this.mute},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){return this.options.component},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.hasAudio&&!this._hasInitd&&this._init()},e.prototype.updateMute=function(){this.setMute(this.isMute),this._updateStyle()},e.prototype.setMute=function(e){this.hasAudio&&(this.component.setMute?this.component.setMute(e):Be.warn("[AudioControlService]: 组件未实现setMute(mute: boolean) 方法，音频无法控制"))},e.prototype.mountControl=function(){this.options.container.appendChild(this.controlElement)},e.prototype.destroy=function(){this.controlElement&&this.controlElement.parentNode&&this.controlElement.parentNode.removeChild(this.controlElement),this.controlElement.removeEventListener("taptap",this._toggleIsMute),this._tapEventProxyCanceller(),this.controlElement.innerHTML=""},e.prototype._updateStyle=function(){this.muteIcon.setMute(this.isMute)},e.prototype._toggleIsMute=function(e){e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),this.mute=!this.isMute,this.options.context.emit(X.muteChangeByUser,this.mute)},e.prototype._init=function(){this._hasInitd=!0,this._appendControl(),this._mute=this.options.defaultMute,this.updateMute(),this._tapEventProxyCanceller=Ae(this.controlElement),this.controlElement.addEventListener("taptap",this._toggleIsMute)},e.prototype._appendControl=function(){var e=this.controlElement;e.setAttribute(re,"");var t=this.innerElement;Fe(e,{width:"36px",height:"36px",position:"absolute",top:"0",left:"0"}),Fe(t,{width:"24px",height:"24px",position:"absolute",top:"6px",left:"6px",backgroundSize:"cover"}),Fe(this.muteIcon.icon,{width:"100%",height:"100%"}),e.appendChild(t)},e}(),ze=n(41),Je=n.n(ze),We={},Ge=Object.prototype.toString;function Ye(e,t){return We.hasOwnProperty.call(e,t)}function Xe(e){if("object"!=typeof(t=e)||null===t||"[object Object]"!==function(e){return null===e?void 0===e?"[object Undefined]":"[object Null]":Ge.call(e)}(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function Ke(e){return null==e}!function(e){e.sdkStartPlayable="SDK_START_PLAYABLE",e.uncaughtError="UNCAUGHT_ERROR",e.renderError="COMP_RENDER_ERROR",e.resourceLoadError="COMP_RES_LOAD_ERROR"}(qe||(qe={}));var Ze={clientX:0,clientY:0,time:(new Date).getTime()},$e=function(){function e(e){var t=this;this._resourcePromiseTimer=null,this._resourcePromiseTimerResolver=H,this._renderPromiseTimer=null,this._renderPromiseTimerResolver=H,this._touchPayload=[A({},Ze),A({},Ze)],this._renderStartPayload={},this._renderFinishPayload={},this._renderStartFired=!1,this._renderFinishFired=!1,this._trackedSdkStart=!1,this.handlePointer=function(e){var n=["touchstart","mousedown"].includes(e.type)?0:1;if("touchstart"===e.type||"touchend"===e.type){var i=e.changedTouches[0];t._touchPayload[n]={clientX:i.clientX,clientY:i.clientY,time:(new Date).getTime()}}else{var r=e;t._touchPayload[n]={clientX:r.clientX,clientY:r.clientY,time:(new Date).getTime()}}},this.options=e,this.trackLifecycle=this.trackLifecycle.bind(this),this.reportFirstInteraction=this.reportFirstInteraction.bind(this),this.proxyClickTrackPointer(),this.handleRenderStart=Je()(this.handleRenderStart,200),this.handleRenderFinish=Je()(this.handleRenderFinish,200)}return Object.defineProperty(e.prototype,"clickInfo",{get:function(){var e=this._touchPayload,t=e[0],n=e[1];return{up_x:n.clientX,up_y:n.clientY,up_time:n.time,down_x:t.clientX,down_y:t.clientY,down_time:t.time}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this.options.pointerTrackContainer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.options.context},enumerable:!1,configurable:!0}),e.prototype.reportFirstInteraction=function(e){var t=null==e?void 0:e.target;t&&function(e,t,n){if(void 0===n&&(n=document.body),!e)return!1;for(;e&&e!==n;){if(e.hasAttribute(t))return!0;e=e.parentElement}return!1}(t,re,this.container||document.body)||this._trackedSdkStart||(this._trackedSdkStart=!0,this.sendTrack(qe.sdkStartPlayable),this.context.status<=G.skdStart&&this.options.context._setStatus(G.skdStart),this.clearProxyFirstUserInteraction())},e.prototype.proxyFirstUserInteraction=function(){var e=this;Ee.forEach((function(t){e.container.addEventListener(t,e.reportFirstInteraction)}))},e.prototype.clearProxyFirstUserInteraction=function(){var e=this;Ee.forEach((function(t){e.container.removeEventListener(t,e.reportFirstInteraction)}))},e.prototype.proxyClickTrackPointer=function(){var e=this;Pe.concat(Te).forEach((function(t){e.container.addEventListener(t,e.handlePointer,!0)}))},e.prototype.clearPointerProxy=function(){var e=this;Pe.concat(Te).forEach((function(t){e.container.removeEventListener(t,e.handlePointer,!0)}))},e.prototype.sendTrack=function(e,t){console.log(e,t)},e.prototype.trackLifecycle=function(e,t){var n=this,i={name:"",payload:{}};"string"==typeof e?(i.name=e,i.payload=t||{},Xe(i.payload)||(i.payload={_raw_form_component_payload:i.payload})):Object.assign(i,e),Ye(ie,i.name)&&(i.name=K[ie[i.name]]);var r=i.name,o=i.payload;switch(r){case K.clickArea:var s=o||{};s.clickInfo=this.clickInfo;var a=s.isConvert,c=s.convertType;Ke(a)||Ke(c)?a&&(s.convertType=1,s.convert_type=1):(Be.warn("[PlayComp.Track]: Can not both pass `isConvert` and `convertType`, `isConvert` will be ignored."),delete s.isConvert),this.sendTrack(K.clickArea,s);break;case K.loadResourceStart:this.sendTrack(K.loadResourceStart,o),this._resourcePromiseTimer=ee(new Promise((function(e){n._resourcePromiseTimerResolver=e})));break;case K.loadResourceFinish:this._resourcePromiseTimerResolver(),this.handleResourceFinish(o);break;case K.renderStart:this._renderPromiseTimer=this._renderPromiseTimer||ee(new Promise((function(e){n._renderPromiseTimerResolver=e}))),this._renderStartPayload=A(A({},this._renderStartPayload),o),this.handleRenderStart();break;case K.renderFinish:this._renderPromiseTimerResolver(),this._renderFinishPayload=A(A({},this._renderFinishPayload),o),this.handleRenderFinish();break;case K.playStart:this.reportFirstInteraction(),this.sendTrack(K.playStart,o),this.options.context._setStatus(G.compStart);break;case K.playFinish:this.sendTrack(K.playFinish,o),this.options.context._setStatus(G.finish);break;default:this.sendTrack(r,o)}},e.prototype.handleResourceFinish=function(e){var t,n;return L(this,void 0,void 0,(function(){var i,r,o;return N(this,(function(s){switch(s.label){case 0:return this._resourcePromiseTimer?[4,this._resourcePromiseTimer]:(i=K.loadResourceFinish,r=K.loadResourceStart,this.sendTrack(qe.uncaughtError,{reason:"Wrong lifecycle emits order, lifecycle [".concat(i,"] triggers before [").concat(r,"]")}),[2]);case 1:return s.sent(),o=null!==(n=null===(t=this._resourcePromiseTimer)||void 0===t?void 0:t.duration)&&void 0!==n?n:-1,this.sendTrack(K.loadResourceFinish,A(A({},e),{load_resource_duration:o})),[2]}}))}))},e.prototype.handleRenderStart=function(){return L(this,void 0,void 0,(function(){return N(this,(function(e){return this._renderStartFired?this.sendTrack(qe.uncaughtError,{reason:"".concat(K.renderStart," has emitted before, latest payload reported"),renderStartPayload:this._renderStartPayload}):(this._renderStartFired=!0,this.sendTrack(K.renderStart,this._renderStartPayload)),[2]}))}))},e.prototype.handleRenderFinish=function(){var e,t;return L(this,void 0,void 0,(function(){var n,i,r;return N(this,(function(o){switch(o.label){case 0:return this._renderPromiseTimer?[4,this._renderPromiseTimer]:(n=K.renderFinish,i=K.renderStart,this.sendTrack(qe.uncaughtError,{reason:"Wrong lifecycle emits order, lifecycle [".concat(n,"] triggers before [").concat(i,"]")}),[2]);case 1:return o.sent(),this._renderFinishFired?(this.sendTrack(qe.uncaughtError,{reason:"".concat(K.renderFinish," has emitted before, latest payload reported"),renderFinishPayload:this._renderFinishPayload}),[2]):(this._renderFinishFired=!0,r=null!==(t=null===(e=this._renderPromiseTimer)||void 0===e?void 0:e.duration)&&void 0!==t?t:-1,this.sendTrack(K.renderFinish,A(A({},this._renderFinishPayload),{render_duration:r})),[2])}}))}))},e.prototype.destroy=function(){this.clearPointerProxy(),this.clearProxyFirstUserInteraction()},e}(),Qe=n(392),et=n.n(Qe),tt=function(e){function t(t){var n,i=e.call(this)||this;return i._status=G.inited,i._errorCode=null,i._subscriptions=[],i._renderSignal=!1,i._singleCallMethods={},i.performance={js_load_time:0,instance_construct_time:0,load_resource_time:0,wait_render_signal_time:0,wait_ad_show_time:0},i.nodeClassName=q("play-comp-wrapper-"),i.componentEventEmitter=new Z,i.perfTimeFn=function(){return 0},i.waitingTimeFn=function(){return 0},i.proxySubscribe=function(e,t,n){var r=i.options.subscribe(e,t,n);i._subscriptions.push(r);var o=function(r){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];r===e&&(t.apply(void 0,s),n&&i.componentEventEmitter.off("hostEvent",o))},s=i.componentEventEmitter.on("hostEvent",o),a=function(){var e=i._subscriptions.indexOf(a);-1!==e&&i._subscriptions.splice(e,1),r(),s()};return a},i.options=Object.assign({},t),i.perfTimeFn=(null===(n=i.options)||void 0===n?void 0:n.perfTimeFn)||Q(),i.beforeInit(),i.init(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}V(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statusText",{get:function(){return G[this.status]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loader",{get:function(){return this.options.loader?this.options.loader:(this._loader||(this._loader=this.getLoader()),this._loader)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorCode",{get:function(){return this._errorCode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVideo",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"abilities",{get:function(){var e=this.getOverrideAbilities();return et()("object"==typeof e,"merged abilities must be an object"),A(A(A({supportSafeMediaPlayback:function(){return!1},requestClose:this.requestClose},this.options.abilities),{track:this.trackService.trackLifecycle}),e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentContainerSize",{get:function(){var e=this.options,t=e.component.size,n=e.containerSize,i=ae(t.width,n.width)/ae(t.height,n.height),r=n.height*i,o=n.width/i;return r<=n.width?{width:r,height:n.height}:{width:n.width,height:o}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"componentOptions",{get:function(){var e=this,t=this.getOverrideComponentOptions();return A({container:this.componentContainer,containerSize:this.componentContainerSize,loader:this.loader,config:this.options.config||{},abilities:this.abilities,subscribe:this.proxySubscribe,dispatch:function(t){for(var n,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];(n=e.componentEventEmitter).emit.apply(n,B(["componentEvent",t],i,!1))}},t)},enumerable:!1,configurable:!0}),t.prototype.beforeInit=function(){this.assertMethod("beforeInit")},t.prototype.init=function(){var e=this;this.assertMethod("init"),this.requestClose=this.requestClose.bind(this),this.createElements(),this.initTrackService(),this.createComponent(),this.initAudioControlService(),this.onStatus(G.bootstrapped).then((function(){e.audioControlService.init()}))},t.prototype.createElements=function(){var e;this.assertMethod("createElements");var t=this.options.component.containerType,n=this.options,i=n.container,r=n.containerSize;this.node=document.createElement("div"),this.innerContainer=document.createElement("div");var o=this.node,s=this.innerContainer;o.setAttribute("data-container","top-container"),o.className=this.nodeClassName,Fe(o,{width:"".concat(r.width,"px"),height:"".concat(r.height,"px"),position:"relative",boxSizing:"border-box"}),s.setAttribute("data-container","inner-container"),Fe(s,((e={position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",margin:"auto",boxSizing:"border-box"})["-webkit-tap-highlight-color"]="transparent",e));var a=this.componentContainerSize;if(Fe(s,{width:"".concat(a.width,"px"),height:"".concat(a.height,"px")}),"canvas"===t){this.componentContainer=document.createElement("canvas");var c=this.componentContainer;Fe(c,{width:"".concat(a.width,"px"),height:"".concat(a.height,"px")}),s.appendChild(c)}else this.componentContainer=s;o.appendChild(s),i.appendChild(o)},t.prototype.createComponent=function(){var e=this;this.assertMethod("createComponent");var t,n=this.options.component;if(!(n&&(t=n,t.prototype&&t.prototype.constructor===t&&Object.getOwnPropertyNames(t.prototype).length>1||/^function\b\s[A-Z].*/.test(t.toString())||/^class\b/.test(t.toString()))))throw this._setStatus(G.error),this._setErrorCode(Y.noComponentConstructor),setTimeout((function(){return e.destroy()})),new Error("[LightPlay]: Component is not ready yet, type is: ".concat(typeof n));try{this.component=new n(this.componentOptions)}catch(t){throw Be.error(t),setTimeout((function(){return e.destroy()})),t}},t.prototype.getOverrideAbilities=function(){return{}},t.prototype.getOverrideComponentOptions=function(){return{}},t.prototype.getLoader=function(){return new I([])},t.prototype.initTrackService=function(){this.trackService=new $e({context:this,pointerTrackContainer:this.innerContainer})},t.prototype.initAudioControlService=function(){var e=this.options.defaultMuted,t=void 0===e||e;this.audioControlService=new De({context:this,component:this.component,container:this.innerContainer,defaultMute:t})},t.prototype.deactivateElement=function(){Fe(this.node,{pointerEvents:"none",position:"absolute"})},t.prototype.hideElement=function(){Fe(this.node,{opacity:"0"})},t.prototype.showElement=function(){Fe(this.node,{opacity:"1"})},t.prototype.activeElement=function(){Fe(this.node,{pointerEvents:"all",position:"relative"})},t.prototype.assertMethod=function(e){if(this._singleCallMethods[e])throw new Error("[PlayCompSDK]: method #".concat(e," can only be called once, multiple calls detected."));this._singleCallMethods[e]=!0},t.prototype.assertComp=function(){if(!this.component)throw this._setStatus(G.error),this._setErrorCode(Y.noComponentInstance),new Error("[PlayCompSDK]: component instance is not ready, lifecycle call failed")},t.prototype.autoRender=function(){return L(this,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:try{this.assertComp()}catch(e){throw e}return this.assertMethod("autoRender"),[4,this.bootstrap()];case 1:return e.sent(),this._setStatus(G.pendingRender),this.waitingTimeFn=Q(),[4,this.onRenderSignal()];case 2:return e.sent(),this.performance.wait_render_signal_time=this.waitingTimeFn(),[4,this.renderStart()];case 3:return e.sent(),[2]}}))}))},t.prototype.bootstrap=function(){var e,t;return L(this,void 0,void 0,(function(){var n,i;return N(this,(function(r){switch(r.label){case 0:this.assertMethod("bootstrap"),this.assertComp(),n=ee(this.component.bootstrap()),r.label=1;case 1:return r.trys.push([1,3,,4]),this._setStatus(G.bootstrapping),[4,n];case 2:return r.sent(),this.performance.load_resource_time=n.duration,this._setStatus(G.bootstrapped),[3,4];case 3:throw i=r.sent(),this.trackService.sendTrack(qe.resourceLoadError,{reason:null!==(e=null==i?void 0:i.message)&&void 0!==e?e:"",error_list:[null!==(t=null==i?void 0:i.message)&&void 0!==t?t:""]}),this._setErrorCode(Y.bootstrapFailed),i;case 4:return[2,n]}}))}))},t.prototype.renderStart=function(){return L(this,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:return this.assertMethod("renderStart"),[4,this.render()];case 1:return e.sent(),this.isVideo||this.start(),[2]}}))}))},t.prototype.render=function(){var e;return L(this,void 0,void 0,(function(){var t,n;return N(this,(function(i){switch(i.label){case 0:this.assertMethod("render"),this.assertComp(),this.trackService.trackLifecycle({name:K.renderStart}),this._setStatus(G.renderingTick),t=ee(this.component.render()),i.label=1;case 1:return i.trys.push([1,3,,4]),this._setStatus(G.rendering),[4,t];case 2:return i.sent(),this.trackService.trackLifecycle({name:K.renderFinish,payload:A(A({},this.performance),{play_comp_duration:this.perfTimeFn()-this.performance.wait_render_signal_time})}),this._setStatus(G.rendered),this.trackService.proxyFirstUserInteraction(),[3,4];case 3:throw n=i.sent(),this.trackService.sendTrack(qe.renderError,{reason:null!==(e=null==n?void 0:n.message)&&void 0!==e?e:""}),this._setErrorCode(Y.renderFailed),n;case 4:return this.isVideo||this.setPendingRunning(),[2,t]}}))}))},t.prototype.start=function(){return L(this,void 0,void 0,(function(){var e=this;return N(this,(function(t){switch(t.label){case 0:return this.status>=G.running?[2]:this.status<G.pendingRunning?[4,new Promise((function(t){var n=e.on("onStatusChange",(function(e){e===G.pendingRunning&&(t(void 0),n())}))}))]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.status!==G.pendingRunning||(this.component.start&&this.component.start(),this._setStatus(G.running)),[2]}}))}))},t.prototype.restart=function(e){return L(this,void 0,void 0,(function(){return N(this,(function(t){return this.assertComp(),[2,this.component.restart(e).then((function(){}))]}))}))},t.prototype.update=function(e){return L(this,void 0,void 0,(function(){return N(this,(function(t){return this.assertComp(),[2,this.component.update(e)]}))}))},t.prototype.emitRenderSignal=function(){this._renderSignal=!0,this.emit(oe)},t.prototype.requestClose=function(e){var t=this;this.triggerClose().then((function(n){e&&t.emit("onUserClose",n)}))},t.prototype.setPendingRunning=function(){this._setStatus(G.pendingRunning)},t.prototype.triggerClose=function(e){return L(this,void 0,void 0,(function(){var t=this;return N(this,(function(n){switch(n.label){case 0:return this.options.onInterceptClose?[4,this.options.onInterceptClose()]:[3,2];case 1:if(!1===n.sent())return[2,!1];n.label=2;case 2:return[4,Ve(this.node,"out").then((function(){t.hideElement()}))];case 3:return n.sent(),e?[4,e()]:[3,5];case 4:n.sent(),n.label=5;case 5:return Promise.resolve().then((function(){return t.destroy()})),[2,!0]}}))}))},t.prototype.onComponentEvent=function(e,t,n){var i=this,r=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];o!==e&&"*"!==e||("*"===e?t.apply(void 0,B([o],s,!0)):t.apply(void 0,s),n&&i.componentEventEmitter.off("componentEvent",r))};return this.componentEventEmitter.on("componentEvent",r)},t.prototype.sendEventToComponent=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];(t=this.componentEventEmitter).emit.apply(t,B(["hostEvent",e],n,!1))},t.prototype.onRenderSignal=function(e){var t=this,n=function(){if(!e)return Promise.resolve();e()};if(this._renderSignal)return n();var i=new Promise((function(e){t.once(oe,(function(){e(),n()}))}));return e?void 0:i},t.prototype.onRendered=function(e){return this.onStatus(G.rendered,e)},t.prototype.onStatus=function(e,t){var n=this,i="number"==typeof e?e:G[e];if(this.status>=i)return function(){if(!t)return Promise.resolve();t()}();var r=new Promise((function(e){var r=n.on("onStatusChange",(function(n){n>=i&&(e(),r(),t&&t())}))}));return t?void 0:r},t.prototype.destroy=function(){return L(this,void 0,void 0,(function(){var t,n=this;return N(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),this.component?[4,this.component.destroy()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[3,4];case 3:return t=i.sent(),Be.error(t),[3,4];case 4:try{this._subscriptions.forEach((function(e){return e()})),this._subscriptions=[],this.trackService&&this.trackService.destroy(),this.audioControlService&&this.audioControlService.destroy(),this.node.parentNode&&this.node.parentNode.removeChild(this.node)}catch(e){Be.error(e)}return this._setStatus(G.destroyed),this.componentEventEmitter.destroy(),e.prototype.destroy.call(this),setTimeout((function(){n.node.innerHTML="",n.component=null})),[2]}}))}))},t.prototype._setStatus=function(e){e<this._status&&e!==G.error?Be.warn("Invalid status update detected, current status: ".concat(this._status," (").concat(ne(this._status),"), but incoming status: ").concat(e," (").concat(ne(e),")")):(this._status=e,this.emit("onStatusChange",e))},t.prototype._setErrorCode=function(e){this._errorCode=e,this.emit("onStatusChange",G.error)},t}(Z),nt=new RegExp("^[a-z0-9]{32}$","i");function it(e){for(var t="",n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t}var rt,ot=function(){function e(e){H(e)}return Object.defineProperty(e,"EMPTY",{get:function(){return"00000000000000000000000000000000"},enumerable:!1,configurable:!0}),e.isUuid=function(t){return Boolean(t&&(t instanceof e||nt.test(t.toString())))},e.create=function(){return new e(it(8))},e.raw=function(){return it(8)},e.prototype.equals=function(e){return!1},e.prototype.isEmpty=function(e){return!1},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return this.value},e}();function st(e,t){return t}function at(e){var t={loadResource:1200,loadScript:1e3,renderComponent:300};return"number"==typeof e?(t.loadResource=e,t.loadScript=e,t.renderComponent=e):Object.keys(e||{}).forEach((function(n){var i=Number(null==e?void 0:e[n]);n in t&&"number"==typeof i&&(t[n]=i)})),t}ot.prototype.constructor=function(e){if(!e)throw new TypeError("Invalid argument; `value` has no value.");var t=ot.EMPTY;return e&&e instanceof ot?t=ot.toString():e&&"[object String]"===Object.prototype.toString.call(e)&&ot.isUuid(e)&&(t=e),this.equals=function(e){return ot.isUuid(e)&&t===e},this.isEmpty=function(){return t===ot.EMPTY},this.toString=function(){return t},this.toJSON=function(){return t},Object.defineProperty(this,"value",{get:function(){return t},enumerable:!0}),this};var ct=((rt={})[qe.renderError]="mnpl_material_render_error",rt[qe.resourceLoadError]="mnpl_resource_load_error",rt[qe.sdkStartPlayable]="sdk_start_playable",rt[qe.uncaughtError]="light_play_uncaught_error",rt[K.clickArea]="clickarea",rt[K.loadResourceFinish]="mnpl_resource_finish_load",rt[K.loadResourceStart]="mnpl_resource_start_load",rt[K.playFinish]="custom_finish_playable",rt[K.playStart]="custom_start_playable",rt[K.renderFinish]="mnpl_material_finish_render",rt[K.renderStart]="mnpl_material_start_render",rt),ut=function(e){function t(t){var n=e.call(this,t)||this;return n.blankSpaceClickTriggered=!1,n.options=t,n}return r(t,e),Object.defineProperty(t.prototype,"isBlankSpacedClickTriggered",{get:function(){return this.blankSpaceClickTriggered},enumerable:!1,configurable:!0}),t.prototype.sendTrack=function(e,t){var n=this;void 0===t&&(t={});var i=[],r=at(this.options.timeout);switch(e){case K.clickArea:var s=st(K.clickArea,t);if(s.convertType&&(s.convert_type=s.convertType),s.convert_type>0){var a=o({},s);if(3===s.convert_type){var c=s,u=c.selectedValue,l=c.isAutoComplete,h=c.reduceDuration,p=c.reduceRewardSuccess;a.select_value=u,a.selected_value=u,a.is_auto_complete=l,a.reduce_duration=h,a.reduce_reward_success=p}this.options.trackClick(a)}else this.options.blankSpaceSendConvert>0&&s.isBlankSpace&&(this.blankSpaceClickTriggered=!0,this.options.trackClick(o(o({},s),{convert_type:this.options.blankSpaceSendConvert,blank_space_click:!0})));break;case K.loadResourceFinish:var d=st(K.loadResourceFinish,t);d.load_resource_duration>r.loadResource&&i.push(["mnpl_resource_load_timeout",{load_resource_duration:d.load_resource_duration,load_resource_timeout:r.loadResource}]);break;case K.renderFinish:var f=st(K.renderFinish,t);f.light_play_duration=f.play_comp_duration,f.render_duration>r.renderComponent&&i.push(["mnpl_material_render_timeout",{render_material_duration:f.render_duration,render_material_timeout:r.renderComponent}])}i.unshift([ct[e]||e,t||{}]),i.forEach((function(e){n._sendTrack(e[0],e[1]||{})}))},t.prototype._sendTrack=function(e,t){var n;if(t)try{JSON.stringify(t)}catch(t){this._sendTrack("light_play_uncaught_error",{reason:"invalid_track_payload",related_label:e,message:null!==(n=null==t?void 0:t.message)&&void 0!==n?n:"JSON stringify failed"})}this.options.track(e,t)},t}($e);var lt=function(){return(lt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function ht(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function pt(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;Object.create;var dt,ft=n(397),vt=n.n(ft),mt={nx:0,ny:0,x:0,y:0,dt:0};function yt(e,t){return void 0===t&&(t=3),Number(e.toFixed(t))}!function(e){e.tap="tap",e.swipe="swipe",e.press="press"}(dt||(dt={}));var gt=function(){function e(e){var t=this;this._rect={x:0,y:0,left:0,right:0,bottom:0,top:0,width:0,height:0,toJSON:function(){return JSON.stringify(this)}},this._startTime=$(),this._down=lt({},mt),this._moves=[],this._up=lt({},mt),this._endFlag=!1,this.handlePointerDown=function(e){t._updateContainerPosition(),t._startTime=$(),t._down=t._collectPoint(e),t._moves=[],t.startListenMove(),t._endFlag=!1},this.handlePointerMove=function(e){t._moves.push(t._collectPoint(e))},this.handlePointerEnd=function(e){t.handleEndCancel(e)},this.handlePointerCancel=function(e){t.handleEndCancel(e)};var n=e.container,i=e.moveThrottle,r=void 0===i?20:i;this._options=e,this._container=n,this._updateContainerPosition=this._updateContainerPosition.bind(this),et()(this.container instanceof HTMLElement,"Container must be a HTMLElement"),this._moveThrottle=isNaN(Number(r))?20:Math.min(Math.max(20,Number(r)),100),this.handlePointerMove=vt()(this.handlePointerMove,this._moveThrottle),this.startCollect()}return Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),e.prototype.handleEndCancel=function(e){this.stopListenMove(),this._endFlag||(this._endFlag=!0,this._up=this._collectPoint(e),this._options.onPointerActivity&&this._options.onPointerActivity({up:this._up,down:this._down,moves:this._moves,type:this.getActivityType(),viewport:{width:this._rect.width,height:this._rect.height}}))},e.prototype.startCollect=function(){this.stopCollect(),this.container.addEventListener(Pe[0],this.handlePointerDown,!0),this.container.addEventListener(Te[0],this.handlePointerEnd,!0),Se&&this.container.addEventListener("touchcancel",this.handlePointerCancel,!0)},e.prototype.stopCollect=function(){this.container.removeEventListener(Pe[0],this.handlePointerDown,!0),this.container.removeEventListener(Te[0],this.handlePointerEnd,!0),this.container.removeEventListener("touchcancel",this.handlePointerCancel,!0),this.stopListenMove()},e.prototype.startListenMove=function(){this.stopListenMove(),this.container.addEventListener(xe[0],this.handlePointerMove,!0)},e.prototype.stopListenMove=function(){this.container.removeEventListener(xe[0],this.handlePointerMove,!0)},e.prototype.getActivityType=function(){var e,t;if((e=this._up,t=this._down,Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y)))<10){var n=this._up.x,i=this._up.x,r=this._up.y,o=this._up.y;if(this._moves.concat(this._down).forEach((function(e){n=Math.min(n,e.x),i=Math.max(i,e.x),o=Math.min(o,e.y),r=Math.max(r,e.y)})),i-n<20&&r-o<20)return this._up.dt>500?dt.press:dt.tap}return dt.swipe},e.prototype.destroy=function(){return ht(this,void 0,void 0,(function(){return pt(this,(function(e){return this.stopCollect(),[2]}))}))},e.prototype._updateContainerPosition=function(){this._rect=this.container.getBoundingClientRect()},e.prototype._collectPoint=function(e){var t,n,i=this._rect,r=i.x,o=i.y,s=i.width,a=i.height;if(e instanceof TouchEvent){var c=e.touches[0]||e.changedTouches[0];t=c.clientX-r,n=c.clientY-o}else t=e.clientX-r,n=e.clientY-o;var u=yt(t/s),l=yt(n/a),h=$()-this._startTime;return{x:yt(t,2),y:yt(n,2),nx:u,ny:l,dt:yt(h,2)}},e}();function bt(e){var t,n=e||{},i=n.maxTrial,r=void 0===i?24:i,o=n.ms,s=void 0===o?160:o,a=Math.max(r,36),c=Math.min(s,160),u=1,l=function(){clearTimeout(t)},h=new Promise((function(e){var n=function(){var i,r;(i=document.createElement("canvas"),r=i.getContext("webgl2")||i.getContext("webgl")||i.getContext("experimental-webgl"),Boolean(r))?e(u):u<=a?(u+=1,t=setTimeout(n,c)):l()};n()}));return h.cancel=l,h}function _t(e){var t={pauseVideoTime:0,visibleTime:0,activeTime:0};if("number"==typeof e)t.visibleTime=e,t.activeTime=e,t.pauseVideoTime=e;else{var n=e.activeTime,i=e.pauseVideoTime,r=void 0===i?n:i,o=e.visibleTime,s=void 0===o?n:o;t.visibleTime=s,t.activeTime=n,t.pauseVideoTime=r}return t}var wt=function(){function e(e){this.scope="_v"+Math.random().toString(16).substr(2,6),this.frame="_frame_"+Math.random().toString(16).substr(2,6),this.innerCls=this.scope+"_inner",this.textCls=this.scope+"_text",this.imgCls=this.scope+"_img",this._isFold=!1,this._text="",this.render(),this.text=(null==e?void 0:e.text)||"点击互动"}return Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(e){this._text=e,this._textEl&&(this._textEl.innerText=e)},enumerable:!1,configurable:!0}),e.prototype.fold=function(){var e=this;this._isFold=!0,this.el&&this._updateInnerWidth().then((function(){var t;null===(t=e.el)||void 0===t||t.classList.add("fold")}))},e.prototype.unfold=function(){this._isFold=!1,this.el&&this.el.classList.remove("fold"),this._resetInnerWidth()},e.prototype.mount=function(e){this.el&&e.appendChild(this.el)},e.prototype.render=function(){this.el=document.createElement("div"),this.el.setAttribute(this.scope,""),this.el.className="",this.el.id=this.scope,this.el.innerHTML='\n    <style></style>\n    <div class="'+this.innerCls+'">\n      <img class="'+this.imgCls+'" src="https://sf3-fe-tos.pglstatp-toutiao.com/obj/goofy/ad/light-play-sdk/release/0.11.0/assets/icon/playable-3x.png" />\n      <div class="'+this.textCls+'"></div>\n    </div>',this._img=this.el.querySelector("img"),this._style=this.el.querySelector("style"),this._textEl=this.el.querySelector("."+this.textCls),this._inner=this.el.querySelector("."+this.innerCls),this._makeStyles()},e.prototype.forceUpdate=function(){this._makeStyles()},e.prototype.destroy=function(){this.el&&(this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el.innerHTML="",this._img=null,this._inner=null,this._style=null,this._textEl=null)},e.prototype._resetInnerWidth=function(){this._inner&&this.el&&(this._isFold||(Fe(this.el,{width:""}),Fe(this._inner,{width:""})))},e.prototype._updateInnerWidth=function(){var e=this;return new Promise((function(t){if(e._inner&&e.el){var n=getComputedStyle(e._inner).width;Fe(e._inner,{width:n}),Fe(e.el,{width:n}),me((function(){me((function(){t()}))}))}else t()}))},e.prototype._makeStyles=function(){var e=function(e,t){var n;if(Array.isArray(t)){var i=t[0],r=t[1];n={from:i,to:r}}else n=t;var o=Object.keys(n).reduce((function(e,t){var i=t;Number(i)<1&&(i="".concat(100*Number(i),"%"));var r=n[t],o=Object.keys(r).reduce((function(e,t){return"".concat(e).concat(t,": ").concat(r[t],";\n")}),"");return e+"".concat(i," {\n  ").concat(o," }\n")}),"");return["-webkit-","-moz-","-o-",""].reduce((function(t,n){return t+"@".concat(n,"keyframes ").concat(e," {\n ").concat(o," }\n")}),"")}(this.frame,{"0%, 100%":{transform:"rotate(0deg)"},"20%, 60%":{transform:"rotate(-15deg)"},"40%, 80%":{transform:"rotate(15deg)"}}),t=Math.min(100,100*document.body.clientWidth/750),n="\n      "+e+"\n\n      #"+this.scope+"["+this.scope+"] {\n        background: rgba(0, 0, 0, .5);\n        transition: all cubic-bezier(0.25, 0.1, 0.25, 1) 300ms;\n        -webkit-transition: all cubic-bezier(0.25, 0.1, 0.25, 1) 300ms;\n        border-radius: 0.24em;\n        height: 0.48em;\n        pointer-events: none ;\n        font-size: "+t+"px;\n      }\n\n      #"+this.scope+"["+this.scope+"] ."+this.innerCls+" {\n        height: 100%;\n        padding: 0 0.16em 0 0.08em;\n        display: flex;\n        align-items: center;\n        font-size: "+t+"px;\n      }\n\n      #"+this.scope+"["+this.scope+"], #"+this.scope+"["+this.scope+"] * {\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n      }\n\n      #"+this.scope+"["+this.scope+"] img."+this.imgCls+" {\n        transition: all cubic-bezier(0, 0, .58, 1) .3s;\n        -webkit-transition: all cubic-bezier(0, 0, .58, 1) .3s;\n        animation: "+this.frame+" 500ms cubic-bezier(0.25, 0.1, 0.25, 1);\n        -webkit-animation: "+this.frame+" 500ms cubic-bezier(0.25, 0.1, 0.25, 1);\n        animation-play-state: paused;\n        -webkit-animation-play-state: paused;\n        animation-iteration-count: 1;\n        -webkit-animation-iteration-count: 1;\n        height: 0.32em;\n        width: 0.32em;\n        margin-right: 0.04em;\n      }\n\n\n      #"+this.scope+"["+this.scope+"] ."+this.textCls+" {\n        color: #ffffff;\n        transition: all cubic-bezier(0, 0, .58, 1) .3s;\n        -webkit-transition: all cubic-bezier(0, 0, .58, 1) .3s;\n        line-height: 1em;\n        height: 1em;\n        font-size: 0.24em;\n        font-weight: 500;\n      }\n\n      #"+this.scope+"["+this.scope+"].fold {\n        background: rgba(0, 0, 0, .12);\n        overflow: hidden;\n        width: 0.48em !important;\n      }\n\n      #"+this.scope+"["+this.scope+"].fold,\n      #"+this.scope+"["+this.scope+"].fold img."+this.imgCls+",\n      #"+this.scope+"["+this.scope+"].fold ."+this.textCls+" {\n        transition-delay: 1.5s;\n        -webkit-transition-delay: 1.5s;\n      }\n\n      #"+this.scope+"["+this.scope+"].fold img {\n        opacity: .5;\n\n        animation-play-state: running;\n        -webkit-animation-play-state: running;\n      }\n\n      #"+this.scope+"["+this.scope+"].fold ."+this.textCls+" {\n        opacity: 0;\n      }\n    ";this._style&&(this._style.innerHTML=n)},e}(),Ct=function(e){return void 0===e&&(e="#fff"),'<svg width="24" height="24" viewBox="0 0 48 48" fill="'+e+'" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" fill="white" fill-opacity="0.01"/>\n  <path d="M14 14L34 34" stroke="'+e+'" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>\n  <path d="M14 34L34 14" stroke="'+e+'" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>'},St=function(){function e(e){var t=this;this.scope=q("close_icon-"),this.handleClose=function(){t.props.onClose&&t.props.onClose()},this.props=e,this.createElements(),this.bindEvents()}return e.prototype.createElements=function(){this.node=document.createElement("div");var e=Le("string"==typeof this.props.fill?Ct(this.props.fill):Ct());Fe(e,{width:"100%",height:"100%"});var t=document.createElement("div");Fe(t,{width:"24px",height:"24px",position:"absolute",top:"6px",left:"6px",backgroundSize:"cover"}),t.appendChild(e),this.node.appendChild(t),Fe(this.node,{width:"36px",height:"36px",position:"absolute",top:"0",right:"0",cursor:"pointer"})},e.prototype.bindEvents=function(){this._tapEventTeardown=Ae(this.node),this.node.addEventListener("taptap",this.handleClose)},e.prototype.destroy=function(){var e;this.node.removeEventListener("taptap",this.handleClose),this._tapEventTeardown(),(null===(e=this.node)||void 0===e?void 0:e.parentNode)&&this.node.parentNode.removeChild(this.node)},e}(),Pt={inView:!1,adVisible:!1,adVisibleOnce:!1,expressShowed:!1,resourceCacheEnabled:!1,useLegacyVisible:!1,autoCloseTimeout:0,_afterExpressTimeFn:function(){}};function xt(e,t){var n,i=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return i||(i=!0,n=e.apply(t||null,r)),n}}var Et,Tt="undefined"!=typeof window&&window.parent!==window&&"iframe"===window.LIGHT_PLAY_SDK_MODE;!function(e){e[e.normal=0]="normal",e[e.notFound=404]="notFound",e[e.error=-1]="error"}(Et||(Et={}));var kt="__global__",Ot="__internal_register__",Mt=[];var Rt,It,jt=new(function(){function e(){var e,t=this;this.clients={},this.requestPromises={},this._handlers=((e={}).__global__={},e),this._handleMessage=this._handleMessage.bind(this),this.logger=new Ne("[MessageBridge]("+this.bridgeType+")",we.info),this.registerMethodHandler(Ot,(function(e,n){var i=(null==e?void 0:e.contextId)||ot.raw();t.clients[i]=n,t.logger.info("register client",e,n)}))}return Object.defineProperty(e.prototype,"isHost",{get:function(){return!Tt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bridgeType",{get:function(){return Tt?"client":"host"},enumerable:!1,configurable:!0}),e.prototype.broadcast=function(e){var t=this;Object.values(this.clients).forEach((function(n){try{t.postMessage(n,e)}catch(n){t.logger.error("send msg failed",n),t.logger.info("related msg",e)}}))},e.prototype.sendMessage=function(e){var t=e.contextId;if(this.isHost)if(t){var n=this.clients[t];if(!n)return void this.logger.error("target window not found",n,t,e);this.postMessage(n,e)}else this.broadcast(e);else this.postMessage(window.parent,e)},e.prototype.postMessage=function(e,t){if(e!==window){this.logger.debug("post msg",e,t);try{e&&e.postMessage(t,"*")}catch(e){this.logger.error("post message failed",e),this.logger.info("related msg",t)}}},e.prototype.call=function(e,t,n){return a(this,void 0,void 0,(function(){var i,r,o=this;return c(this,(function(s){return i=ot.raw(),r={type:"__request__",identifier:e,payload:t,contextId:n,requestId:i},this.sendMessage(r),[2,new Promise((function(e,t){o.requestPromises[i]=[e,t]}))]}))}))},e.prototype.on=function(e,t,n){return this.registerEventHandler(e,t,n)},e.prototype.emit=function(e,t,n){var i={type:"__event__",identifier:e,payload:t,contextId:n};this.sendMessage(i)},e.prototype.register=function(e){return a(this,void 0,void 0,(function(){return c(this,(function(t){return[2,this.call(Ot,{contextId:e})]}))}))},e.prototype.unregister=function(e){return a(this,void 0,void 0,(function(){return c(this,(function(t){return delete this.clients[e],[2]}))}))},e.prototype.registerEventHandler=function(e,t,n){return this.registerHandler("event",e,t,n)},e.prototype.registerMethodHandler=function(e,t,n){return this.registerHandler("method",e,t,n)},e.prototype.registerHandler=function(e,t,n,i){var r=this,o=this._getHandlerArr(t,i);if("method"===e){if(o.some((function(e){return e.fn===n})))throw new Error("Invalid registration: handler for method: "+t+" in contextId("+(i||kt)+") has been registered before.");var s=Mt.includes(t);et()(!s,"reserved method name: "+t)}return o.push({type:e,fn:n,contextId:i}),function(){r.unregisterHandler(e,t,n,i)}},e.prototype.unregisterHandler=function(e,t,n,i){var r,o,s;if(s=i?null===(o=null===(r=this._handlers)||void 0===r?void 0:r[i])||void 0===o?void 0:o[t]:this._handlers.__global__[t]){var a=s.findIndex((function(t){return t.fn===n&&t.type===e&&t.contextId===i}));-1!==a&&s.splice(a,1)}},e.prototype.attach=function(){window.addEventListener("message",this._handleMessage)},e.prototype.detach=function(){window.removeEventListener("message",this._handleMessage)},e.prototype._getHandlerArr=function(e,t){var n=t||kt;return this._handlers[n]=this._handlers[n]||{},this._handlers[n][e]=this._handlers[n][e]||[],this._handlers[n][e]},e.prototype._handleRequestMessage=function(e){var t;return a(this,void 0,void 0,(function(){var n,i,r,o,s,a,u,l,h,p,d,f;return c(this,(function(c){switch(c.label){case 0:if(n=e.data,i=n.type,r=n.identifier,o=n.requestId,s=n.payload,a=n.contextId,u="__event__"===i?"event":"method",!o||!r)return this.logger.error("Invalid request message, requestId and identifier is required",n),[2];l=(null===(t=this._handlers[a||kt])||void 0===t?void 0:t[r])||[],h=l.find((function(e){return e.type===u})),d=Et.normal,c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,null==h?void 0:h.fn(s,e.source)];case 2:return p=c.sent(),[3,5];case 3:return f=c.sent(),p=function(e){if(e instanceof Error)try{var t=JSON.parse(JSON.stringify(e));return t.message=e.message,t.stack=e.stack,t}catch(t){return e}return e}(f),d=Et.error,[3,5];case 4:return h||(d=Et.notFound),"method"===u&&this.sendMessage({type:"__callback__",identifier:r,payload:{code:d,data:p},requestId:o,contextId:a}),[7];case 5:return[2]}}))}))},e.prototype._handleEventMessage=function(e){var t;return a(this,void 0,void 0,(function(){var n,i,r,o,s;return c(this,(function(a){return n=e.data,i=n.identifier,r=n.contextId,o=n.payload,i?(s=this._getHandlerArr(i),r&&(s=s.concat((null===(t=this._handlers[r])||void 0===t?void 0:t[i])||[])),s.filter((function(e){return"event"===e.type})).forEach((function(t){t.fn(o,e.source)})),[2]):(this.logger.error("Invalid event message, identifier is required",n),[2])}))}))},e.prototype._handleCallbackMessage=function(e){return a(this,void 0,void 0,(function(){var t,n,i,r,o,s,a,u,l,h,p;return c(this,(function(c){return t=e.data,n=t.requestId,i=t.payload,r=t.identifier,o=t.contextId,n?((s=this.requestPromises[n])||this.logger.error("Invalid callback requestId",t),a=s[0],u=s[1],h=(l=i||{}).code,p=l.data,h===Et.normal?a(p):h===Et.notFound?u("Handler for "+r+"("+o+") not found"):h===Et.error?u(function(e){if(e&&"message"in e){var t=new Error(e.message);return t.stack=e.stack,Object.keys(e).forEach((function(n){t[n]=e[n]})),t}return e}(p)):u("Unknown error within "+r+"("+o+")"),[2]):(this.logger.error("Invalid callback message, requestId is required",t),[2])}))}))},e.prototype._handleMessage=function(e){var t;if(e.source!==window&&((null===(t=e.data)||void 0===t?void 0:t.type)&&"string"==typeof e.data.type))switch(this.logger.debug("msg",e.data),e.data.type){case"__event__":this._handleEventMessage(e);break;case"__request__":this._handleRequestMessage(e);break;case"__callback__":this._handleCallbackMessage(e)}},e}());jt.attach(),Mt.push(Ot),function(e){e[e.running=8]="running",e[e.paused=4]="paused",e[e.invisible=2]="invisible",e[e.hangup=1]="hangup"}(Rt||(Rt={})),function(e){e[e.running=7]="running",e[e.paused=11]="paused",e[e.invisible=13]="invisible",e[e.hangup=14]="hangup"}(It||(It={}));var Ft=function(){function e(e){void 0===e&&(e=160),this.intervalTime=0,this.handlers=[],this._internalStatus=Rt.hangup,this.visibilityListenerWorking=!1,this.lastNow=$(),this.intervalTime=Math.max(16,e),this._onVisibilityChange=this._onVisibilityChange.bind(this),this.internalStatus=this.status|Rt.running}return Object.defineProperty(e.prototype,"status",{get:function(){return this._internalStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"internalStatus",{get:function(){return this.internalStatus},set:function(e){var t=e;this._internalStatus=e,this.handleStatusChange(t)},enumerable:!1,configurable:!0}),e.prototype.addHandler=function(e){var t=this;return this.handlers.push([e,this.lastNow-$()]),this.updateHang(),function(){t.removeHandler(e)}},e.prototype.removeHandler=function(e){var t=this.handlers.findIndex((function(t){return t[0]===e}));-1!==t&&this.handlers.splice(t,1),this.updateHang()},e.prototype.pause=function(){this.status&Rt.paused||(this._updateTime(),this.internalStatus=this.status|Rt.paused)},e.prototype.resume=function(){this.status&Rt.paused&&(this.lastNow=$(),this.internalStatus=this.status&It.paused)},e.prototype.start=function(){this.internalStatus=this.status|Rt.running},e.prototype.stop=function(){this.internalStatus=this.status&It.running},e.prototype.destroy=function(){this._stop()},e.prototype.updateHang=function(){var e=this.handlers.length;this.internalStatus=0===e?this.status|Rt.hangup:this.status&It.hangup},e.prototype.handleStatusChange=function(e){this.status===Rt.running?this._run():this._stopCore(),this.visibilityListenerWorking||(document&&document.addEventListener("visibilitychange",this._onVisibilityChange),this.visibilityListenerWorking=!0)},e.prototype._onVisibilityChange=function(){var e="visible"===document.visibilityState||!0!==document.hidden||!1===document.webkitHidden;this.internalStatus=e?this.status&It.invisible:this.status|Rt.invisible},e.prototype._updateTime=function(){var e=$()-this.lastNow;this.lastNow=$(),this.handlers.forEach((function(t){t[1]+=e}))},e.prototype._tick=function(){var e=this;this._updateTime(),this.handlers.forEach((function(t){t[0](t[1],(function(){return e.removeHandler(t[0])}))}))},e.prototype._run=function(){var e=this;this.timer=setInterval((function(){return e._tick()}),this.intervalTime),this._tick()},e.prototype._stop=function(){document&&document.removeEventListener("visibilitychange",this._onVisibilityChange),this.visibilityListenerWorking=!1,this._stopCore()},e.prototype._stopCore=function(){clearInterval(this.timer)},e}(),Vt=(new Ft(250),new Ft(50));function At(e,t){var n,i=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return i||(i=!0,n=e.apply(t||null,r)),n}}var Lt,Nt,Bt,Ht=function(e){function t(t){var n=e.call(this)||this;return n.currentScene=0,n._resumePlaybackFromClickEvent=!1,n._resumePlaybackFromComponent=!1,n._lateRender=!1,n._enableForceRender=!1,n.ctx=t.ctx,n}return r(t,e),Object.defineProperty(t.prototype,"enableForceRender",{get:function(){return this._enableForceRender},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMultiple",{get:function(){var e,t;return this.ctx.videoControls.length>1||Boolean(null===(t=null===(e=this.ctx.videoControls)||void 0===e?void 0:e[0])||void 0===t?void 0:t.targetScene)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strictMode",{get:function(){var e=this.ctx.videoControls[0],t=_t((e||{}).time);return Boolean(e.pauseVideo)||t.activeTime!==t.visibleTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSupportAccuratePause",{get:function(){var e=this.ctx.options.abilities,t=e.cancelVideoAccuratePause,n=e.waitVideoAccuratePause;return Boolean(t)&&Boolean(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canContinuePlay",{get:function(){return!this.ctx.isForceFinish&&(!(!Ke(this.vState.state)&&this.vState.state!==F.a.PAUSE)&&(!this._resumePlaybackFromClickEvent&&!this._resumePlaybackFromComponent))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSupport",{get:function(){return!this.isMultiple||this.isSupportAccuratePause},enumerable:!1,configurable:!0}),t.prototype.attach=function(){var e=this;this.handleVideoException(),this.hide(),this.ctx.proxySubscribe(j.a.videoStateChange,(function(t){e.vState=t})),this.ctx.onComponentEvent("endScene",(function(){var t,n;clearTimeout(e._idleCloseTimer),e.hide().then((function(){e.currentScene>=e.ctx.videoControls.length&&e.lateDestroy()})),null===(n=(t=e.ctx.options.abilities).setContainerBgShowHide)||void 0===n||n.call(t,"hide"),e.resetState(),e.currentScene++,e.resumeVideoPlay(),e.prepareScene()}))},t.prototype.hide=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){return this.ctx.hideElement(),this.ctx.deactivateElement(),[2,Ve(this.ctx.node,"out")]}))}))},t.prototype.resetState=function(){this._resumePlaybackFromClickEvent=!1,this._resumePlaybackFromComponent=!1},t.prototype.resumeVideoPlay=function(){var e;null===(e=this._resumeVideoPlay)||void 0===e||e.call(this)},t.prototype.componentResumePlay=function(){this.resumeVideoPlay(),this._resumePlaybackFromComponent=!0},t.prototype.lateDestroy=function(){var e=this;me((function(){me((function(){e.ctx.requestClose(!1)}))}))},t.prototype.prepareScene=function(){return a(this,void 0,void 0,(function(){var e,t,n,i,r,o,s,u,l,h,p,d,f,v,m,y,g,b,_,w,C,S,P,x,E,T,k,O,M,R,I,V,A,L,N,B=this;return c(this,(function(H){return(e=this.ctx.videoControls[this.currentScene])?(t=e.time,n=e.pauseVideo,i=e.autoCompleteTimeout,r=e.safePlayContinue,o=void 0===r||r,s=e.targetScene,u=function(){return 0},l=e.forceRenderEvenOverTiming,(h=void 0!==l&&l)&&s&&(h=!1),this._enableForceRender=this._enableForceRender||h,p=_t(t),d=p.visibleTime,f=p.activeTime,v=p.pauseVideoTime,m=!1,y=!1,g=!1,b=Math.max(d,f,v),_=Math.min(d,f,v),n||(b=Math.max(d,f)),w=this.ctx.options.abilities,C=w.waitVideoAccuratePause,S=w.cancelVideoAccuratePause,P=[],E=!1,!h&&n&&C&&(E=!0,T=ot.raw(),k=function(){P.forEach((function(e){return e()}))},C(v,T).then((function(e){var t=e.paused,n=e.message;t?k():B.ctx.forceFinish("accurate_video_pause_failed",{detail_reason:n})})),this._pauseSubscription=At((function(){null==S||S(v,T)}))),O={pauseVideo:0,active:0,visible:0,pauseTrigger:0,forcePlayableVisible:!1},M=[],this._resumeVideoPlay=At((function(){var e;n&&(B.canContinuePlay&&(B.ctx.adVisible||!o?null===(e=B.ctx.options.abilities)||void 0===e||e.toggleVideoState():Be.warn("light play won't continue video playback due to safePlayContinue strategy.")),setTimeout((function(){var e,t,n;(null===(t=null===(e=B.ctx.options)||void 0===e?void 0:e.abilities)||void 0===t?void 0:t.setCoverElesViewable)&&(null===(n=B.ctx.options.abilities)||void 0===n||n.setCoverElesViewable(!0))}),200))})),R=At((function(){var e=ee(B.ctx.onRendered());M.push(e),e.then((function(){B.ctx.treatAsRenderFail||Ve(B.ctx.node,"in").then((function(){B.ctx.showElement()})),B.ctx.treatAsRenderFail||0!==B.currentScene||(B.ctx.trackService.sendTrack("mnpl_material_video_scene_show"),B.ctx.reportLightPlayRealShow({lateRender:B._lateRender,pauseVideoTime:v,lateTime:u()}),B.ctx.setPendingRunning()),O.visible=1e3*x.currentTime-d+e.duration}))})),I=At((function(){if(0===B.currentScene){var e=ee(B.ctx.start());M.push(e),e.then((function(){O.active=1e3*x.currentTime-f+e.duration}))}B.ctx.onRendered().then((function(){B.ctx.activeElement()}));var t=B.ctx.on("onStatusChange",(function(e){return a(B,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return G.finish!==e?[3,2]:(t(),"finish"!==this.ctx.autoCloseTiming?[3,2]:[4,this.ctx.triggerClose(this.resumeVideoPlay.bind(this))]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}))})),V=At((function(){var e=0,t=function(){return a(B,void 0,void 0,(function(){var t,n,r,o,a,u,l=this;return c(this,(function(c){return!E&&this.ctx.adVisible&&(null===(r=this.vState)||void 0===r?void 0:r.state)===F.a.PLAY&&(null===(o=this.ctx.options.abilities)||void 0===o||o.toggleVideoState()),s&&me((function(){var e,t;l.ctx.sendEventToComponent("switchScene",s),null===(t=(e=l.ctx.options.abilities).setContainerBgShowHide)||void 0===t||t.call(e,"show");var n=l.currentScene+1,i=l.ctx.videoControls.length,r=(n/i).toFixed(2);l.ctx.trackService.sendTrack("mnpl_multi_scene_enter",{scene:s,progress:r,current_scene:n,total_scenes:i})})),O.pauseTrigger=1e3*x.currentTime+e,(t=this.fixVideoState()).then((function(t){l.handleVideoUnexpectedContinue(t),O.pauseVideo=1e3*t.currentTime-v+e})),(null===(u=null===(a=this.ctx.options)||void 0===a?void 0:a.abilities)||void 0===u?void 0:u.setCoverElesViewable)&&this.ctx.options.abilities.setCoverElesViewable(!1),(n=Pt.autoCloseTimeout)&&n>5e3&&(this._idleCloseTimer=setTimeout((function(){l.ctx.requestClose(),l.ctx.trackService.sendTrack("mnpl_force_auto_close",{blank_space_clicked:l.ctx.trackService.isBlankSpacedClickTriggered})}),n)),i&&i>0&&(this._idleTimer=setTimeout((function(){l.ctx.component.autoComplete&&"function"==typeof l.ctx.component.autoComplete&&(Ke(l.ctx.autoCompleteValue)?l.ctx.component.autoComplete():l.ctx.component.autoComplete(l.ctx.autoCompleteValue))}),i)),this.ctx.onStatus(G.compStart,(function(){l.clearIdleTimeout(),clearTimeout(l._idleCloseTimer)})),[2,t]}))}))};if(B.ctx.isRendered)M.push(t());else if(u=Q(),h){var n=ee(B.ctx.onRendered());O.forcePlayableVisible=!0,B._lateRender=!0,M.push(n.then((function(){return e=n.duration,new Promise((function(e){me((function(){e(t())}))}))})))}else B.ctx.treatAsRenderFail=!0,B.ctx.onRendered().then((function(){B.ctx.forceFinish("mnpl_rendered_after_pause_video_time",{lateTime:u(),state:x.state,currentTime:x.currentTime,stateStr:F.a[x.state]})}))})),A=At((function(){Promise.all(M).then((function(){var e={pauseVideo:n,visibleTime:d,activeTime:f,pauseVideoTime:v,activeGap:O.active,visibleGap:O.visible,pauseVideoGap:O.pauseVideo,pauseVideoTriggerTime:O.pauseTrigger,pauseVideoJSBTime:O.pauseVideo+v-O.pauseTrigger,forcePlayableVisible:O.forcePlayableVisible};B.ctx.trackService.sendTrack("mnpl_vedio_interactive_timegap",{gaps:[e],gapFirstObj:e})}))})),P.push(R,I,V,A),L=!1,N=this.ctx.proxySubscribe(j.a.videoStateChange,(function(e){if(x=e,e.state===F.a.PLAY){var t=1e3*e.currentTime;if(n&&_-t<=300&&!L&&!B.ctx.isRendered){L=!0;var i=_-t;Vt.addHandler((function(e,t){var n;if(B.ctx.isRendered)t();else{var r=_-1e3*x.currentTime;if(!(x.state===F.a.PAUSE&&r>=200))return i-e<100?(t(),void(E&&(null===(n=B._pauseSubscription)||void 0===n||n.call(B),B.ctx.treatAsRenderFail=!0,V()))):void 0}}))}t>=d&&!m&&(m=!0,R()),t>=f&&!y&&(y=!0,I()),t>=v&&!g&&n&&(g=!0,V()),t>=b&&(null==N||N(),A())}})),[2]):[2]}))}))},t.prototype.untilEarliestTiming=function(){var e=this,t=this.ctx.videoControls.reduce((function(e,t){var n=_t(t.time);return Math.min(e,n.activeTime,n.pauseVideoTime,n.visibleTime)}),1/0);return new Promise((function(n){var i=e.ctx.proxySubscribe(j.a.videoStateChange,(function(e){1e3*e.currentTime>=t&&(n(),i())}))}))},t.prototype.fixVideoState=function(){var e=this;return new Promise((function(t){var n=e.ctx.proxySubscribe(j.a.videoStateChange,(function(e){e.state===F.a.PAUSE&&(t(e),n())}))}))},t.prototype.handleVideoUnexpectedContinue=function(e){var t=this,n=this.ctx.proxySubscribe(j.a.videoStateChange,(function(i){if(t._resumePlaybackFromComponent)n();else if(Math.abs(e.currentTime-i.currentTime)>.2){if(n(),t.ctx.trackService.isBlankSpacedClickTriggered)return void(t._resumePlaybackFromClickEvent=!0);t.ctx.forceFinish("video_unexpected_continue_play",{state:i.state,currentTime:i.currentTime,stateStr:F.a[i.state]})}}));this.ctx.onComponentEvent("endScene",(function(){n()}))},t.prototype.handleVideoException=function(){var e=this,t=this.ctx.proxySubscribe(j.a.videoStateChange,(function(n){-1!==[F.a.ERROR,F.a.COMPLETE].indexOf(n.state)&&e.ctx.status>=G.running&&(t(),n.state===F.a.COMPLETE?e.ctx.destroy():e.ctx.forceFinish("video_state_exception",{state:n.state,currentTime:n.currentTime,stateStr:F.a[n.state]}))}))},t.prototype.clearIdleTimeout=function(){clearTimeout(this._idleTimer)},t.prototype.destroy=function(){var e;null===(e=this._pauseSubscription)||void 0===e||e.call(this),this.clearIdleTimeout(),this.resumeVideoPlay()},t}(Z);!function(e){e[e.Audio_Record=1]="Audio_Record"}(Lt||(Lt={})),function(e){e[e.HAS_PERMISSION=1]="HAS_PERMISSION",e[e.PERMANENT_DENY_PERMISSION=2]="PERMANENT_DENY_PERMISSION"}(Nt||(Nt={})),function(e){e[e.USEABLE=1]="USEABLE",e[e.KWS_MODULE_DOWNLOAD_FAILED=2]="KWS_MODULE_DOWNLOAD_FAILED"}(Bt||(Bt={}));var Ut=function(){function e(e){this.csjJsb=e.csjJsb}return e.prototype.hasPermission=function(e){return a(this,void 0,void 0,(function(){var t=this;return c(this,(function(n){return[2,new Promise((function(n){t.csjJsb.callGlobalJsInterfaceOrJsBridge("hasPermission",{type:e},(function(e){n(e.result)}))}))]}))}))},e.prototype.requestPermission=function(e){return a(this,void 0,void 0,(function(){var t=this;return c(this,(function(n){return[2,new Promise((function(n){t.csjJsb.callGlobalJsInterfaceOrJsBridge("requestPermission",{type:e},(function(){n()}))}))]}))}))},e.prototype.canUseKWS=function(){return a(this,void 0,void 0,(function(){var e=this;return c(this,(function(t){return[2,new Promise((function(t){e.csjJsb.callGlobalJsInterfaceOrJsBridge("canUseKWS",{},(function(e){t(e.result===Bt.USEABLE)}))}))]}))}))},e.prototype.hasRecordAudioPermission=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.hasPermission(Lt.Audio_Record)];case 1:return[2,e.sent()]}}))}))},e.prototype.requestRecordAudioPermission=function(){return a(this,void 0,void 0,(function(){var e=this;return c(this,(function(t){return[2,new Promise((function(t){e.csjJsb.onJsBridge("kwsRecordAudioResult",(function(e){t(e.result)}),!0),e.requestPermission(Lt.Audio_Record)}))]}))}))},e.prototype.startKWS=function(e){return a(this,void 0,void 0,(function(){var t=this;return c(this,(function(n){return[2,new Promise((function(n){t.csjJsb.onJsBridge("kwsCheckResult",(function(e){n(1===e.result)}),!0),t.csjJsb.callGlobalJsInterfaceOrJsBridge("startKWS",e,(function(){}))}))]}))}))},e.prototype.cancelKWS=function(){return a(this,void 0,void 0,(function(){var e=this;return c(this,(function(t){return[2,new Promise((function(t){e.csjJsb.callGlobalJsInterfaceOrJsBridge("cancelKWS",{},(function(){t()}))}))]}))}))},e.prototype.getLiveSaasAuthStatus=function(){return a(this,void 0,void 0,(function(){var e=this;return c(this,(function(t){return[2,new Promise((function(t){e.csjJsb.callGlobalJsInterfaceOrJsBridge("getLiveSaasAuthStatus",{},(function(e){void 0===e.has_playable_auth_switch||Ce?t({has_playable_auth_switch:!1}):t(e)}))}))]}))}))},e.prototype.openNewCommonWebPage=function(e,t){return a(this,void 0,void 0,(function(){var n=this;return c(this,(function(i){return[2,new Promise((function(i){n.csjJsb.callGlobalJsInterfaceOrJsBridge("openNewCommonWebPage",{web_url:e,web_title:t},(function(){i()}))}))]}))}))},e.prototype.openDetailOrPrivacyDialog=function(e){return a(this,void 0,void 0,(function(){var t=this;return c(this,(function(n){return[2,new Promise((function(n){t.csjJsb.callGlobalJsInterfaceOrJsBridge("showAppDetailOrPrivacyDialog",{show_dialog_style:"privacy"===e?2:1},(function(){n()}))}))]}))}))},e.prototype.interactiveEnd=function(){return a(this,void 0,void 0,(function(){var e=this;return c(this,(function(t){return[2,new Promise((function(t){e.csjJsb.callGlobalJsInterfaceOrJsBridge("interactiveEnd",{},(function(){t()}))}))]}))}))},e}();Be.setTag("LightPlaySDK");var qt,Dt=function(e){function t(t){var n=e.call(this,t)||this;return n._isForceFinish=!1,n._resumePlaybackFromComponent=!1,n._resumePlaybackFromClickEvent=!1,n._innerTapFlag=!1,n._shouldShow=!0,n._touchEventInterceptorCalled=!1,n._touchEventPrevented=!1,n._blankSpaceActionCount=0,n.destroy=xt(n.destroy,n),n.forceDestroy=xt(n.forceDestroy,n),n.options=n.options,n}return r(t,e),Object.defineProperty(t.prototype,"isVideo",{get:function(){return this.videoControls.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"safeVisibility",{get:function(){var e,t,n;return null!==(n=null===(t=(e=this.options.abilities).supportSafeMediaPlayback)||void 0===t?void 0:t.call(e))&&void 0!==n&&n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibilityEvent",{get:function(){return this.safeVisibility?j.a.adVisible:j.a.inViewChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adVisible",{get:function(){return this.safeVisibility?kn.adVisible:kn.inView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRendered",{get:function(){return this.status>=G.rendered&&this.status<G.destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"treatAsRenderFail",{get:function(){return this._treatAsRenderFail},set:function(e){this._treatAsRenderFail=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isForceFinish",{get:function(){return this._isForceFinish},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isHost",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldContinueVideoPlay",{get:function(){return!(this._isForceFinish||this._resumePlaybackFromClickEvent||this._resumePlaybackFromComponent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"forceDisableAudioControl",{get:function(){var e=this.options.forceDisableAudioControl;return void 0!==e&&e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoPreventTouchEvent",{get:function(){var e=this.options.autoPreventTouchEvent;return void 0!==e&&e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"touchEventPrevented",{get:function(){return this._touchEventPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoCloseTiming",{get:function(){var e=this.options.autoCloseTiming;return e||(this.isVideo?"finish":void 0)},enumerable:!1,configurable:!0}),t.prototype.getOverrideAbilities=function(){var e=this;return{setTouchEventPrevented:this.setTouchEventPrevented,requestClose:this.requestClose,pangle_resumeVideoPlay:function(){var t;null===(t=e.videoManager)||void 0===t||t.componentResumePlay()},pangle_setBottomBarShowHide:function(t){var n,i;t=!0===t||"show"===t?"show":"hide",null===(i=(n=e.options.abilities).setBottomBarShowHide)||void 0===i||i.call(n,t)},csjBridge:new Ut({csjJsb:this.options.abilities.csjJsb})}},t.prototype.beforeInit=function(){var t=this;e.prototype.beforeInit.call(this);var n=this.options,i=n.videoControl,r=n.videoControls,o=void 0===r?[]:r;0===o.length&&i&&o.push(i),this.videoControls=o,this.contextId=this.options.contextId||ot.raw(),Tt&&(this.options.onInterceptClose=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return jt.call("onInterceptClose",e,t.contextId)},this.on("*",(function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];jt.emit("proxySelfEvent",{name:e,args:n},t.contextId)})),this.componentEventEmitter.on("componentEvent",(function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];jt.emit("proxyComponentEvent",{name:e,args:n},t.contextId)})),jt.registerEventHandler("proxyHostEvent",(function(e){(null==e?void 0:e.name)&&t.sendEventToComponent.apply(t,u([e.name],e.args))}),this.contextId))},t.prototype.init=function(){var t=this;this.videoManager=new Ht({ctx:this}),this.preventGesture=this.preventGesture.bind(this),this.setTouchEventPrevented=this.setTouchEventPrevented.bind(this),this.requestClose=this.requestClose.bind(this),this._treatAsRenderFail=!1,e.prototype.init.call(this),this.prepareTouchEventInterceptor(),this.prepareRenderSignal(),this.handleAudio(),this.reportPointerActivity=this.reportPointerActivity.bind(this),this.triggerClose=this.triggerClose.bind(this),this.activityCollector=new gt({container:this.innerContainer,moveThrottle:200,onPointerActivity:this.reportPointerActivity}),this.isVideo?this.prepareVideo2():(this.addPlayIcon(),this.onExpressAdShow().then((function(){t.reportLightPlayRealShow()}))),this.handleNodeTaptap=this.handleNodeTaptap.bind(this),this.handleInnerContainerTaptap=this.handleInnerContainerTaptap.bind(this);var n=Ae(this.innerContainer),i=Ae(this.node);this._cancelNodeTaptapProxy=function(){n(),i()},this.innerContainer.addEventListener("taptap",this.handleInnerContainerTaptap,!0),this.node.addEventListener("taptap",this.handleNodeTaptap),this.prepareAutoClose(),this.on(X.muteChangeByUser,(function(e){t.trackService.sendTrack("mnpl_user_set_mute_state",{muted:e})}))},t.prototype.handleAudio=function(){var e=this;this.audioControlService.forceMute=!this.adVisible,this._inViewSubscription=this.proxySubscribe(this.visibilityEvent,(function(t){e.audioControlService.forceMute=!t})),this.onRendered().then((function(){e.forceDisableAudioControl&&(e._inViewSubscription(),e.audioControlService.forceMute=!0),e.audioControlService.hasAudio&&!e.forceDisableAudioControl&&(e.audioControlService.ready=!0,e.isVideo||e.audioControlService.mountControl())}))},t.prototype.prepareRenderSignal=function(){return a(this,void 0,void 0,(function(){var e,t=this;return c(this,(function(n){switch(n.label){case 0:return[4,this.onStatus(G.bootstrapped)];case 1:return n.sent(),e=this.instantDoRender?"instant":"waiting_ad_show",this.trackService.sendTrack("mnpl_render_timing",{timing:e,mode:this.renderTiming}),this.instantDoRender?(this.emitRenderSignal(),[3,4]):[3,2];case 2:return[4,new Promise((function(e,n){var i,r,o=t.renderTiming===F.c.expressShow?j.a.expressShow:t.visibilityEvent,s=function(){return a(t,void 0,void 0,(function(){return c(this,(function(t){return i&&i(),r&&r.cancel(),e(),[2]}))}))};r=bt(),i=t.proxySubscribe(o,(function(e){try{e&&s()}catch(e){n(e)}})),r.then((function(){s()}))}))];case 3:n.sent(),this.emitRenderSignal(),n.label=4;case 4:return[2]}}))}))},t.prototype.initTrackService=function(){this.trackClick=this.trackClick.bind(this);var e=this.options.blankSpaceSendConvert,t=void 0===e?0:e;this.trackService=new ut({track:this.options.abilities.track,trackClick:this.trackClick,context:this,pointerTrackContainer:this.innerContainer,timeout:this.options.timeout,blankSpaceSendConvert:Math.max(0,t)})},Object.defineProperty(t.prototype,"renderTiming",{get:function(){var e=this.options.renderTiming,t=void 0===e?F.c.expressShow:e;return Ce?F.c.legacy:t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instantDoRender",{get:function(){if(Ce)return!0;switch(this.renderTiming){case F.c.expressShow:return kn.expressShow;case F.c.legacy:return this.adVisible;default:return!1}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoCompleteValue",{get:function(){return this.options.autoCompleteValue},enumerable:!1,configurable:!0}),t.prototype.addCloseIcon=function(){if(this.options.closeIcon){var e="rgba(22, 24, 35, 0.6)";"string"==typeof this.options.closeIcon&&(e=this.options.closeIcon),this.closeIcon=new St({onClose:this.requestClose,fill:e}),this.innerContainer.appendChild(this.closeIcon.node)}},t.prototype.addPlayIcon=function(){var e,t,n=this;if(this.options.playIcon){var i="";"string"==typeof this.options.playIcon&&(i=this.options.playIcon),this.playIcon=new wt({text:i}),(null===(e=this.playIcon)||void 0===e?void 0:e.el)&&Fe(null===(t=this.playIcon)||void 0===t?void 0:t.el,{position:"absolute",bottom:"6px",left:"6px"}),this.onStatus(G.rendered).then((function(){n.playIcon&&n.playIcon.mount(n.innerContainer)})),this.onStatus(G.skdStart).then((function(){n.playIcon&&n.playIcon.fold()})),this.proxySubscribe(j.a.expressShow,(function(){n.playIcon&&n.playIcon.forceUpdate()}),!0)}},t.prototype.prepareRgbDetect=function(){},t.prototype.prepareAutoClose=function(){var e=this;if(this.autoCloseTiming)switch(this.autoCloseTiming){case"convert":this.on("trackClick",(function(){return e.triggerClose()}));break;case"finish":this.isVideo||this.onStatus(G.finish).then((function(){return e.triggerClose()}))}this.addCloseIcon()},t.prototype.prepareVideo2=function(){return a(this,void 0,void 0,(function(){var e=this;return c(this,(function(t){switch(t.label){case 0:return!this.isVideo||this.isHost?[2]:this.videoManager.isSupport?(this.proxySubscribe(j.a.videoStateChange,(function(t){var n=t.muted;e.audioControlService.mute=n})),this.videoManager.attach(),this.videoManager.prepareScene(),[4,Promise.race([this.onRendered(),this.videoManager.untilEarliestTiming()])]):(this._treatAsRenderFail=!0,this.forceFinish("do_not_support",{is_multiple:Number(this.videoManager.isMultiple),support_accurate_pause:Number(this.videoManager.isSupportAccuratePause)}),[2]);case 1:return t.sent(),!this.videoManager.strictMode||this.isRendered||this.videoManager.enableForceRender||this.forceFinish("mnpl_rendered_after_pause_video_time"),[2]}}))}))},t.prototype.prepareVideo=function(){var e=this;if(this.options.videoControl){var t=this.options.videoControl,n=t.time,i=t.pauseVideo,r=t.autoCompleteTimeout,o=t.safePlayContinue,s=void 0===o||o,u=t.forceRenderEvenOverTiming,l=void 0!==u&&u;this.hideElement(),this.deactivateElement();var h=_t(n),p=h.visibleTime,d=h.activeTime,f=h.pauseVideoTime,v=!1,m=!1,y=!1,g=Math.max(p,d,f),b=Math.min(p,d,f);i||(g=Math.max(p,d)),this.handleVideoException(),this.proxySubscribe(j.a.videoStateChange,(function(t){var n=t.muted;e.audioControlService.mute=n}));var _,w=this.options.abilities,C=w.waitVideoAccuratePause,S=w.cancelVideoAccuratePause,P=[],x=!1;if(i&&C){x=!0;var E=ot.raw();C(f,E).then((function(t){var n=t.paused,i=t.message;n?P.forEach((function(e){return e()})):e.forceFinish("accurate_video_pause_failed",{detail_reason:i})})),this._pauseSubscription=xt((function(){null==S||S(f,E)}))}var T={pauseVideo:0,active:0,visible:0,pauseTrigger:0,forcePlayableVisible:!1},k=[];this._resumeVideoPlay=xt((function(){var t;i&&(e.shouldContinueVideoPlay&&(e.adVisible||!s?null===(t=e.options.abilities)||void 0===t||t.toggleVideoState():Be.warn("light play won't continue video playback due to safePlayContinue strategy.")),setTimeout((function(){var t,n,i;(null===(n=null===(t=e.options)||void 0===t?void 0:t.abilities)||void 0===n?void 0:n.setCoverElesViewable)&&(null===(i=e.options.abilities)||void 0===i||i.setCoverElesViewable(!0))}),200))}));var O=xt((function(){var t=ee(e.onRendered());k.push(t),t.then((function(){e._shouldShow&&Ve(e.node,"in").then((function(){e.showElement()})),e._treatAsRenderFail||(e.trackService.sendTrack("mnpl_material_video_scene_show"),e.reportLightPlayRealShow()),e.setPendingRunning(),T.visible=1e3*_.currentTime-p+t.duration}))})),M=xt((function(){var t=ee(e.start());k.push(t),t.then((function(){T.active=1e3*_.currentTime-d+t.duration})),e.onRendered().then((function(){e.activeElement()}));var n=e.on("onStatusChange",(function(t){return a(e,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return G.finish!==t?[3,2]:(n(),"finish"!==this.autoCloseTiming?[3,2]:[4,this.triggerClose(this._resumeVideoPlay)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),R=xt((function(){var t=0,n=function(){return a(e,void 0,void 0,(function(){var e,n,i,o,s=this;return c(this,(function(a){return x||null===(n=this.options.abilities)||void 0===n||n.toggleVideoState(),T.pauseTrigger=1e3*_.currentTime+t,(e=this.fixVideoState()).then((function(e){s.handleVideoUnexpectedContinue(e),T.pauseVideo=1e3*e.currentTime-f+t})),(null===(o=null===(i=this.options)||void 0===i?void 0:i.abilities)||void 0===o?void 0:o.setCoverElesViewable)&&this.options.abilities.setCoverElesViewable(!1),r&&r>0&&(this._idleTimer=setTimeout((function(){s.component.autoComplete&&"function"==typeof s.component.autoComplete&&(Ke(s.autoCompleteValue)?s.component.autoComplete():s.component.autoComplete(s.autoCompleteValue))}),r)),this.onStatus(G.compStart,(function(){s.clearIdleTimeout()})),[2,e]}))}))};if(e.isRendered)k.push(n());else if(l){var i=ee(e.onRendered());T.forcePlayableVisible=!0,k.push(i.then((function(){return t=i.duration,n()})))}else{e._shouldShow=!1,e._treatAsRenderFail=!0;var o=Q();e.onRendered().then((function(){e.forceFinish("mnpl_rendered_after_pause_video_time",{lateTime:o(),state:_.state,currentTime:_.currentTime,stateStr:F.a[_.state]})}))}})),I=xt((function(){Promise.all(k).then((function(){var t={pauseVideo:i,visibleTime:p,activeTime:d,pauseVideoTime:f,activeGap:T.active,visibleGap:T.visible,pauseVideoGap:T.pauseVideo,pauseVideoTriggerTime:T.pauseTrigger,pauseVideoJSBTime:T.pauseVideo+f-T.pauseTrigger,forcePlayableVisible:T.forcePlayableVisible};e.trackService.sendTrack("mnpl_vedio_interactive_timegap",{gaps:[t],gapFirstObj:t})}))}));P.push(O,M,R,I);var V=!1,A=this.proxySubscribe(j.a.videoStateChange,(function(t){if(_=t,t.state===F.a.PLAY){var n=1e3*t.currentTime;if(x&&i&&b-n<=300&&!V&&!e.isRendered){V=!0;var r=b-n;Vt.addHandler((function(t,n){var i;if(e.isRendered)n();else{var o=b-1e3*_.currentTime;if(!(_.state===F.a.PAUSE&&o>=200))return r-t<100?(n(),null===(i=e._pauseSubscription)||void 0===i||i.call(e),R(),void(e._treatAsRenderFail=!0)):void 0}}))}n>=p&&!v&&(v=!0,O()),n>=d&&!m&&(m=!0,M()),n>=f&&!y&&i&&(y=!0,R()),n>=g&&(null==A||A(),I())}}))}},t.prototype.fixVideoState=function(){var e=this;return new Promise((function(t){var n=e.proxySubscribe(j.a.videoStateChange,(function(e){e.state===F.a.PAUSE&&(t(e),n())}))}))},t.prototype.handleVideoUnexpectedContinue=function(e){var t=this,n=this.proxySubscribe(j.a.videoStateChange,(function(i){if(t._resumePlaybackFromComponent)n();else if(Math.abs(e.currentTime-i.currentTime)>.2){if(n(),t.trackService.isBlankSpacedClickTriggered)return void(t._resumePlaybackFromClickEvent=!0);t.forceFinish("video_unexpected_continue_play",{state:i.state,currentTime:i.currentTime,stateStr:F.a[i.state]})}}))},t.prototype.handleVideoException=function(){var e=this,t=this.proxySubscribe(j.a.videoStateChange,(function(n){-1!==[F.a.ERROR,F.a.COMPLETE].indexOf(n.state)&&e.status>=G.running&&(t(),e.forceFinish("video_state_exception",{state:n.state,currentTime:n.currentTime,stateStr:F.a[n.state]}))}))},t.prototype.handleInnerContainerTaptap=function(){var e=this;this._innerTapFlag=!0,me((function(){e._innerTapFlag=!1}))},t.prototype.handleNodeTaptap=function(){if(!this._innerTapFlag&&this.options.blankSpaceSendConvert){var e={area:"top-container",areaMark:"休闲互动组件容器空白区域（组件区域外）",actionCount:++this._blankSpaceActionCount,actionNo:1,isBlankSpace:!0};this.abilities.track("clickArea",e)}},t.prototype.forceFinish=function(e,t){this._isForceFinish=!0,this._setStatus(G.finish),this.trackService.sendTrack("mnpl_video_force_finish",o(o({},t),{reason:e})),this.forceDestroy()},t.prototype.setTouchEventPrevented=function(e){this._touchEventPrevented=e,!Ce&&this.options.abilities.preventTouchEvent&&this.options.abilities.preventTouchEvent(e)},t.prototype.prepareTouchEventInterceptor=function(){this._touchEventInterceptorCalled||(this._touchEventInterceptorCalled=!0,Ce&&this.innerContainer.addEventListener("touchmove",this.preventGesture),this.autoPreventTouchEvent&&this.setTouchEventPrevented(!0))},t.prototype.trackClick=function(e){this.options.abilities.trackClick(e),this.emit("trackClick")},t.prototype.requestClose=function(e){var t=this,n=this._innerTapFlag;requestAnimationFrame((function(){var i=e;!1!==i&&(i=e||t._innerTapFlag||n),t.trackService.sendTrack("mnpl_user_click_element",{element_type:"close-icon",user_action:Boolean(i)}),i&&t.trackService.sendTrack("mnpl_user_close"),t.triggerClose()}))},t.prototype.reportLightPlayRealShow=function(e){this.trackService.sendTrack("mini_playable_real_show",e)},t.prototype.reportPointerActivity=function(e){this.trackService.sendTrack("mnpl_pointer_activity",e)},t.prototype.resolveGestureConflict=function(){this.prepareTouchEventInterceptor()},t.prototype.preventGesture=function(e){this.touchEventPrevented&&(null==e?void 0:e.preventDefault)&&(null==e||e.preventDefault())},t.prototype.clearIdleTimeout=function(){clearTimeout(this._idleTimer)},t.prototype.onExpressAdShow=function(){var e=this;if(Pt.adVisible||Pt.expressShowed)return Promise.resolve();var t=[],n=function(){t.forEach((function(e){return e()}))},i=new Promise((function(i){var r=e.proxySubscribe(j.a.expressShow,(function(e){e&&(i(),n())}));t.push(r)})),r=new Promise((function(i){var r=e.proxySubscribe(j.a.adVisible,(function(e){e&&(i(),n())}));t.push(r)}));return Promise.race([i,r])},t.prototype.forceDestroy=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){return Ve(this.node,"out"),[2,this.destroy()]}))}))},t.prototype.destroy=function(){var t,n,i,r;return a(this,void 0,void 0,(function(){var o,s;return c(this,(function(a){try{null===(t=this._resumeVideoPlay)||void 0===t||t.call(this),null===(n=this.videoManager)||void 0===n||n.destroy(),null===(i=this._cancelNodeTaptapProxy)||void 0===i||i.call(this),null===(r=this.options.loader)||void 0===r||r.reset(),this.audioControlService&&(this.audioControlService.mute=!0),this.playIcon&&this.playIcon.destroy(),this.closeIcon&&this.closeIcon.destroy(),this._pauseSubscription&&this._pauseSubscription(),this._inViewSubscription&&this._inViewSubscription(),this.activityCollector.destroy(),clearTimeout(this._idleTimer),this.playIcon=null,this.node.removeEventListener("taptap",this.handleNodeTaptap),this.innerContainer.removeEventListener("taptap",this.handleInnerContainerTaptap,!0),this.innerContainer.removeEventListener("touchmove",this.preventGesture),o=this.options.abilities.setCoverElesViewable,setTimeout((function(){o&&o(!0)}),200),s=new Ut({csjJsb:this.options.abilities.csjJsb}),console.log("interaction end"),s.interactiveEnd()}catch(e){Be.error(e)}return e.prototype.destroy.call(this),kn.remove(this),[2]}))}))},t}(tt);function zt(e,t,n,i){var r=function(){if(qt||(qt=document.querySelector("head")),!qt)throw new Error("Element head is not exists!");return qt}();return new Promise((function(o,s){!function a(c){var u=function(e){var t=document.createElement("script");return t.type="text/javascript",t.async=Boolean(e),t}(n);function l(){u.parentNode&&u.parentNode.removeChild(u)}function h(e){l(),d(),t&&c<t?a(c+1):s(e)}function p(){i&&i(),l(),o(),d()}function d(){u.removeEventListener("error",h),u.removeEventListener("load",p)}n&&u.setAttribute("data-async-module","true"),u.setAttribute("crossorigin","anonymous"),u.src=e,u.addEventListener("error",h),u.addEventListener("load",p),r.appendChild(u)}(1)}))}var Jt,Wt={},Gt={};var Yt=function(e){return ht(void 0,void 0,void 0,(function(){var t,n,i,r;return pt(this,(function(o){switch(o.label){case 0:if(t=e.src,n=e.retryTimes,i=e.async,Ye(Wt,t))return[2,Wt[t]];o.label=1;case 1:return o.trys.push([1,3,,4]),r=Gt[t]||ee(function(e,t,n,i){return window.define&&window.define.amd?new Promise((function(n,i){var r=Jt||window.require||window.requirejs;r||i(new Error("AMD environment detect without global `require` or `requirejs` method. Please use `loadComponent.useCustomRequire` to inject require function or contact developers. More info here: https://github.com/amdjs/amdjs-api/blob/master/AMD.md#global-variables-")),r([e],(function(e){t(e),n()}))})):zt(e,n,i,t)}(t,(function(e){!function(e,t){if(void 0===t&&(t=window.PlayableComponent),t)Wt[e]=t,window.PlayableComponent=void 0;else if(!Wt[e])throw new Error("[PlayableComponent]: Component is not exported to window")}(t,e)}),n,i)),Gt[t]=r,[4,r];case 2:return o.sent(),delete Gt[t],[2,Wt[t]];case 3:throw o.sent();case 4:return[2]}}))}))};Yt.useCustomRequire=function(e){Jt=e},"undefined"!=typeof window&&(window.getPlayableComponent=function(e){return Wt[e]});var Xt="0x0@1x";function Kt(){var e=document.body,t=e.clientHeight,n=e.clientWidth,i=window.devicePixelRatio||1;Xt=n+"x"+t+"@"+i+"x"}ge||(me(Kt),window.addEventListener("resize",Kt));var Zt="";function $t(){return Zt=Zt||[_e(),be()].filter((function(e){return e.length>0})).map((function(e){return e.filter((function(e){return null!=e})).join(".")})).join(""),{timestamp:(new Date).getTime(),refer:"mini_playable_track",os:Ce?"iOS":"Android",page_resolution:Xt,renderer:location.protocol+"//"+location.host+location.pathname,os_version:Zt,light_play_sdk_version:"0.11.0-alpha.2",current_is_in_view:Number(Pt.inView),express_showed:Number(Pt.expressShowed),express_visible_duration:Pt._afterExpressTimeFn(),rendererQuery:location.search,lightPlaySDKHashVersion:"bbdbc9c"}}function Qt(e){return parseInt(e||"0",16)}function en(e,t){var n=function(e){if(!e||6!==e.length&&7!==e.length)return[0,0,0];var t=e.slice(-6);return[Qt(t.substr(0,2)),Qt(t.substr(2,2)),Qt(t.substr(4,2))]}(e);return"rgba("+n[0]+", "+n[1]+", "+n[2]+", "+t+")"}var tn;function nn(){return"data:image/svg+xml;utf8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" fill="none">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M27.9612 12.4998C27.7823 12.164 27.3651 12.0369 27.0293 12.2159L26.1703 12.6737C25.1791 13.0983 24.375 13.9408 24.0361 15.053C23.9829 15.2277 23.943 15.4032 23.9157 15.5785H19.714C14.0075 15.5785 9.38135 20.2046 9.38135 25.9112C9.38135 31.6178 14.0075 36.2439 19.714 36.2439H29.3579C35.0645 36.2439 39.6906 31.6178 39.6906 25.9112C39.6906 20.2046 35.0645 15.5785 29.3579 15.5785H26.7975C26.8566 15.4906 26.9283 15.4135 27.0092 15.3489L28.3253 14.6474C28.661 14.4685 28.7881 14.0513 28.6092 13.7155L27.9612 12.4998ZM29.3579 18.3339H19.714C15.5292 18.3339 12.1367 21.7263 12.1367 25.9112C12.1367 30.096 15.5292 33.4885 19.714 33.4885H29.3579C33.5427 33.4885 36.9352 30.096 36.9352 25.9112C36.9352 21.7263 33.5427 18.3339 29.3579 18.3339ZM31.4231 25.217C32.5644 25.217 33.4896 24.2918 33.4896 23.1505C33.4896 22.0091 32.5644 21.0839 31.4231 21.0839C30.2818 21.0839 29.3566 22.0091 29.3566 23.1505C29.3566 24.2918 30.2818 25.217 31.4231 25.217ZM30.7401 28.6645C30.7401 29.8058 29.8149 30.731 28.6736 30.731C27.5323 30.731 26.6071 29.8058 26.6071 28.6645C26.6071 27.5232 27.5323 26.5979 28.6736 26.5979C29.8149 26.5979 30.7401 27.5232 30.7401 28.6645ZM19.0228 27.2831V30.0411C19.0228 30.4215 19.3313 30.7299 19.7117 30.7299H21.0894C21.4698 30.7299 21.7782 30.4215 21.7782 30.0411V27.2831H24.5362C24.9166 27.2831 25.225 26.9747 25.225 26.5943V25.2166C25.225 24.8362 24.9166 24.5278 24.5362 24.5278H21.7782V21.7749C21.7782 21.3945 21.4698 21.0861 21.0894 21.0861H19.7117C19.3313 21.0861 19.0228 21.3945 19.0228 21.7749V24.5278H16.27C15.8896 24.5278 15.5811 24.8362 15.5811 25.2166V26.5943C15.5811 26.9747 15.8896 27.2831 16.27 27.2831H19.0228Z" fill="white"/>\n  </svg>')}function rn(){return"data:image/svg+xml;utf8,"+encodeURIComponent('\n  <svg width="68" height="68" viewBox="0 0 68 68" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect x="21.9203" y="45.1108" width="24.9753" height="2.67593" rx="1.33796" fill="white"/>\n  <rect x="32.6247" y="18.351" width="2.67593" height="24.9753" rx="1.33796" fill="white"/>\n  <path d="M23.7052 32.624L32.5353 41.4541C33.232 42.1507 34.3615 42.1507 35.0582 41.4541L43.8883 32.624" stroke="white" stroke-width="2.67593" stroke-linecap="round"/>\n  </svg>\n  ')}function on(e){return void 0===e&&(e=!0),{popup:e,progressBar:e,download:e}}!function(e){e.processBar="process-bar",e.downloadBtn="download-btn",e.loading="loading-el"}(tn||(tn={}));var sn="tag",an={clientX:0,clientY:0,time:(new Date).getTime()},cn={progressMain:"progress-main",progressInnerWrap:"progress-inner-container",progressInner:"progress-inner",progressBar:"progress-bar",progressPopup:"progress-popup",progressPopupIcon:"progress-popup-icon",progressTipText:"progress-tip-text",downloadWrap:"download-wrap",downloadSvgWrap:"download-svg-wrap",downloadSvg:"download-svg",downloadIcon:"download-icon",styleNode:"style",gradientNodeVertical:"gradient-node-vertical",popupMain:"popup-main",popupMainSvg:"popup-main-svg"},un=["mouseup","mousedown","touchstart","touchend"],ln=function(){function e(e){var t=this;this.scope=q("loading_frame_"),this.classMap=Object.keys(cn).reduce((function(e,n){var i=n;return e[i]=t.scope+"_"+cn[i],e}),{}),this._touchPayload=[o({},an),o({},an)],this.handlePointer=function(e){var n=["touchstart","mousedown"].includes(e.type)?0:1;if("touchstart"===e.type||"touchend"===e.type){var i=e.changedTouches[0];t._touchPayload[n]={clientY:i.clientX,clientX:i.clientX,time:(new Date).getTime()}}else{var r=e;t._touchPayload[n]={clientX:r.clientX,clientY:r.clientY,time:(new Date).getTime()}}if(["touchend","mouseup"].includes(e.type)&&t.props.onTap){var o=e.currentTarget.getAttribute(sn)||tn.loading;t.props.onTap(e,t.clickInfo,o)}},this.props=e,this.scaleRatio=this.props.containerWidth/600,this.initHTML(),this.initNodes(),this.makeStyles(),this.updateNodes(),this.bindEvents()}return Object.defineProperty(e.prototype,"mainColor",{get:function(){var e=this.props.mainColor;return void 0===e?"#FF6F16":e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clickInfo",{get:function(){var e=this._touchPayload,t=e[0],n=e[1];return{up_x:n.clientX,up_y:n.clientY,up_time:n.time,down_x:t.clientX,down_y:t.clientY,down_time:t.time}},enumerable:!1,configurable:!0}),e.prototype.initHTML=function(){var e,t,n='\n    <div id="'+this.scope+'">\n      <style class="'+this.classMap.styleNode+'"></style>\n      <div class="'+this.classMap.progressMain+'" '+'tag="'+tn.processBar+'">\n        <div class="'+this.classMap.progressInnerWrap+'">\n          <div class="'+this.classMap.progressInner+'">\n            <div style="width: 5%;" class="'+this.classMap.progressBar+" "+this.classMap.gradientNodeVertical+'">\n              <div class="'+this.classMap.progressPopup+'">\n                <div class="'+this.classMap.popupMain+'">\n                  '+(e="none",t=this.classMap.popupMainSvg,void 0===e&&(e="#fff"),void 0===t&&(t=""),'\n    <svg class="'+t+'" width="50" height="57" viewBox="0 0 50 57" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <g filter="url(#filter0_d)">\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M28.8831 49.7007C40.8461 47.8351 50 37.4868 50 25.0005C50 11.1934 38.8071 0.000488281 25 0.000488281C11.1929 0.000488281 0 11.1934 0 25.0005C0 37.6759 9.43315 48.148 21.6622 49.7796L25.2426 54.4853L28.8831 49.7007Z" fill="white"/>\n      </g>\n      <circle cx="25" class="_fill_cls_name" cy="25.0005"  fill="'+e+'" r="22"/>\n      <circle cx="25" class="_filter_cls_name" cy="25.0005" r="22"  fill="url(#paint0_linear)" fill-opacity="0.5"/>\n      <defs>\n        <filter id="filter0_d" x="0" y="0.000488281" width="50" height="56.3624" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n          <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>\n          <feOffset dy="1.87755"/>\n          <feColorMatrix type="matrix" values="0 0 0 0 0.952941 0 0 0 0 0.407843 0 0 0 0 0.0705882 0 0 0 1 0"/>\n          <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>\n          <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>\n        </filter>\n        <linearGradient id="paint0_linear" x1="25" y1="3.00049" x2="25" y2="47.0005" gradientUnits="userSpaceOnUse">\n          <stop stop-color="white"/>\n          <stop offset="1" stop-color="white" stop-opacity="0"/>\n        </linearGradient>\n      </defs>\n    </svg>\n  \n                  <img class="')+this.classMap.progressPopupIcon+'" src="'+nn()+'" />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <p class="'+this.classMap.progressTipText+'"></p>\n      </div>\n      <div class="'+this.classMap.downloadWrap+'" '+'tag="'+tn.downloadBtn+'">\n        <div class="'+this.classMap.downloadSvgWrap+'">\n          '+function(e){return void 0===e&&(e=""),'\n  <svg class="'+e+'" xmlns="http://www.w3.org/2000/svg" width="68" height="68" viewBox="0 0 68 68" fill="none">\n    <rect x="1.5" y="1.5" width="65" class="_fill_cls_name" height="65" rx="32.5" fill="#FF6F16" stroke="white" stroke-width="3"/>\n    <rect class="_filter_cls_name" width="68" height="68" rx="34" fill="url(#paint0_linear)" fill-opacity="0.5"/>\n    <defs>\n      <linearGradient id="paint0_linear" x1="34" y1="0" x2="34" y2="68" gradientUnits="userSpaceOnUse">\n        <stop stop-color="white"/>\n        <stop offset="1" stop-color="white" stop-opacity="0"/>\n      </linearGradient>\n    </defs>\n  </svg>'}(this.classMap.downloadSvg)+'\n        </div>\n        <img class="'+this.classMap.downloadIcon+'" src="'+rn()+'" />\n      </div>\n    </div>\n    ';this.node=Le(n)},e.prototype.queryNode=function(e){return this.node.querySelector(e)},e.prototype.initNodes=function(){this.styleNodeEl=this.queryNode("."+this.classMap.styleNode),this.progressBarEl=this.queryNode("."+this.classMap.progressBar),this.popupIconEl=this.queryNode("."+this.classMap.progressPopupIcon),this.downloadIconEl=this.queryNode("."+this.classMap.downloadIcon),this.downloadWrapEl=this.queryNode("."+this.classMap.downloadWrap),this.tipTextEl=this.queryNode("."+this.classMap.progressTipText),this.mainEl=this.queryNode("."+this.classMap.progressMain)},e.prototype.updateNodes=function(){var e=this.props,t=e.downloadIcon,n=void 0===t||t,i=e.progressBarIcon,r=void 0===i?nn():i,o=e.text,s=void 0===o?"即将开启互动小游戏":o;if(this.popupIconEl.src=r,this.tipTextEl.innerText=s,n){this.downloadWrapEl.style.display="";var a="object"==typeof n&&n.icon;this.downloadIconEl.src=a||rn()}else this.downloadWrapEl.style.display="none";this.getGradient().progressBar?this.progressBarEl.classList.add(this.classMap.gradientNodeVertical):this.progressBarEl.classList.remove(this.classMap.gradientNodeVertical)},e.prototype.updatePercent=function(e){isNaN(e)&&(Be.warn("传入的加载进度不是一个数字"),e=0),(e>1||e<0)&&Be.warn("进度只能介于 [0, 1] 之间");var t=(100*Math.min(1,Math.max(0,e))).toFixed(2);this.progressBarEl.style.width=t+"%"},e.prototype.bindEvents=function(){var e=this,t=[this.mainEl,this.downloadWrapEl];un.forEach((function(n){t.forEach((function(t){t.addEventListener(n,e.handlePointer)}))}))},e.prototype.cancelEvents=function(){var e=this,t=[this.mainEl,this.downloadWrapEl];un.forEach((function(n){t.forEach((function(t){t.removeEventListener(n,e.handlePointer)}))}))},e.prototype.getFillColor=function(){var e=this.mainColor,t=this.props.fillColor,n={popup:e,progressBar:e,progressBg:en(e,.2),download:e};if("string"==typeof t)n.popup=n.progressBar=n.progressBg=n.download=t;else if(Xe(t)){var i=t,r=i.popup,o=i.progressBar,s=i.progressBg,a=i.download;n.popup=r||e,n.progressBar=o||e,n.progressBar=s||e,n.download=a||e}return n},e.prototype.getGradient=function(){var e=on(!0),t=this.props.gradient,n=void 0===t||t;if(!n)return on(!1);if(Xe(n)){var i=n,r=i.popup,o=void 0===r||r,s=i.download,a=void 0===s||s,c=i.progressBar,u=void 0===c||c;e.popup=o,e.download=a,e.progressBar=u}return e},e.prototype.getPosition=function(){var e={top:"top: 2.36em;",x:"right: 0.2em;"},t=this.props.position||{},n=t.left,i=t.right,r=t.top;return r&&(e.top="top: "+r+";"),n&&i?(Be.warn("position 同时提供 left 和 right 则使用 right"),e.x="right: "+i+";"):n?e.x="left: "+n+";":i&&(e.x="right: "+i+";"),e},e.prototype.makeStyles=function(){var e=100*this.scaleRatio;this.styleNodeEl.innerHTML="\n      #"+this.scope+" {\n        font-size: "+e+"px;\n        width: 6em;\n\n        position: absolute;\n        "+this.getPosition().top+"\n        pointer-events: none;\n        visibility: visible;\n      }\n\n      #"+this.scope+"::before {\n        content: '';\n        position: absolute;\n        width: 6em;\n        height: 1.68em;\n        top: -0.66em;\n        left: 0;\n        z-index: 0;\n        pointer-events: none;\n        background: linear-gradient(180deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, 0.236) 26.56%, rgba(22, 24, 35, 0.276) 34.9%, rgba(22, 24, 35, 0.276) 75.52%, rgba(22, 24, 35, 0.236) 81.25%, rgba(22, 24, 35, 0) 100%);\n      }\n\n      #"+this.scope+" ."+this.classMap.progressMain+",\n      #"+this.scope+" ."+this.classMap.downloadWrap+" {\n        pointer-events: all;\n      }\n\n      #"+this.scope+",\n      #"+this.scope+" * {\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n      }\n\n      #"+this.scope+" ."+this.classMap.progressBar+" {\n        background-color: "+this.getFillColor().progressBar+";\n        height: 100%;\n        border-radius: 20px;\n        position: relative;\n      }\n\n      #"+this.scope+" ."+this.classMap.progressPopup+" {\n        position: absolute;\n        right: 0;\n        top: -0.62em;\n        transform: translateX(50%);\n        width: 0.50em;\n        height: 0.56em;\n      }\n\n      #"+this.scope+" ."+this.classMap.gradientNodeVertical+"::after {\n        content: ' ';\n        display: block;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: linear-gradient(180deg, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0) 100%);\n        border-radius: 150px;\n      }\n\n      #"+this.scope+" ."+this.classMap.progressInner+" {\n        background-color: "+this.getFillColor().progressBg+";\n        border: 0.04em solid #ffffff;\n        border-radius: 22px;\n        height: 0.22em;\n        width: 3em;\n        position: relative;\n      }\n\n      #"+this.scope+" ."+this.classMap.progressInnerWrap+" {\n        background-color: #fff;\n        border-radius: 100px;\n      }\n\n      #"+this.scope+" ."+this.classMap.progressMain+" {\n        width: 3em;\n        border-radius: 100px;\n        margin-left: 1.5em;\n        position: relative;\n      }\n\n      #"+this.scope+" ."+this.classMap.popupMain+" {\n        width: 0.5em;\n        height: 0.5em;\n        position: relative;\n        border-radius: 50%;\n        display: flex;\n      }\n\n      #"+this.scope+" ."+this.classMap.popupMain+" img {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        display: block;\n      }\n\n      #"+this.scope+" ."+this.classMap.popupMainSvg+" {\n        width: 0.5em;\n        height: 0.57em;\n        position: absolute;\n        top: 0;\n        left: 0;\n      }\n\n      #"+this.scope+" ."+this.classMap.progressTipText+" {\n        display: block;\n        line-height: 1.4em;\n        font-size: 0.2em;\n        margin-top: 0.6em;\n        text-align: center;\n        color: #fff;\n        font-weight: 400;\n      }\n\n      #"+this.scope+" ."+this.classMap.popupMainSvg+" ."+"_fill_cls_name {\n        fill: "+this.getFillColor().popup+";\n      }\n\n      #"+this.scope+" ."+this.classMap.downloadSvgWrap+" ."+"_fill_cls_name {\n        fill: "+this.getFillColor().download+"\n      }\n\n      #"+this.scope+" ."+this.classMap.popupMainSvg+" ."+"_filter_cls_name {\n        "+(this.getGradient().popup?"":"fill: none;")+"\n      }\n      #"+this.scope+" ."+this.classMap.downloadSvg+" ."+"_filter_cls_name {\n        "+(this.getGradient().download?"":"fill: none;")+"\n      }\n\n      #"+this.scope+" ."+this.classMap.downloadWrap+" {\n        position: absolute;\n        "+this.getPosition().x+"\n        bottom: 0;\n        width: 0.68em;\n        height: 0.68em;\n        display: flex;\n      }\n\n      #"+this.scope+" ."+this.classMap.downloadSvg+" {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 0.68em;\n        height: 0.68em;\n      }\n\n      #"+this.scope+" ."+this.classMap.downloadIcon+" {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        display: block;\n      }\n    "},e.prototype.destroy=function(){this.cancelEvents(),this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node)},e}(),hn=x();function pn(e){void 0===e&&(e=0);var t=Q();return function(){return t()+e}}hn.maxSize=50;Object.create;function dn(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;var fn="undefined"!=typeof window&&Boolean(window.document),vn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return Promise.resolve()},t}(function(){function e(e){var t=this;if(this.track=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];(null===(e=t._options.abilities)||void 0===e?void 0:e.track)?t._options.abilities.track.apply(null,n):console.warn("[PlayableComponent] track method is not implemented in options.abilities, arguments are: ",n)},this._options=e,e.loader)this.loader=e.loader;else if(fn)try{this.loader=window.__LightPlayLoader.Loader.shared}catch(e){console.warn("[LightPlayLoader]: missing loader instance. Please see @play-comp/loader readme.md")}}return Object.defineProperty(e.prototype,"safeMediaPlayback",{get:function(){return this._options.abilities.supportSafeMediaPlayback?this._options.abilities.supportSafeMediaPlayback():(console.warn("[PlayableComponent] safeMediaPlayback only works since @play-comp/sdk-core v1.2.0 and later, default fallback value false returned"),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loader",{get:function(){if(this.__internal_loader)return this.__internal_loader;throw new Error("[LightPlayLoader]: missing loader instance. Please see @play-comp/loader readme.md")},set:function(e){this.__internal_loader=e},enumerable:!1,configurable:!0}),e.prototype.trackLifecycle=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.track.apply(null,e)},e.prototype.setTouchEventPrevented=function(e){this._options.abilities.setTouchEventPrevented?this._options.abilities.setTouchEventPrevented(e):console.warn("[PlayableComponent] setTouchEventPrevented only works since @play-comp/sdk-core v1.3.0 and later")},e.prototype.requestClose=function(e){this._options.abilities.requestClose?this._options.abilities.requestClose(e):console.warn("[PlayableComponent] requestClose only works since @play-comp/sdk-core v2.0.2 and later")},e.prototype.dispatchEvent=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];this._options.dispatch?(t=this._options).dispatch.apply(t,dn([e],n,!1)):console.warn("[PlayableComponent] dispatch only works since @play-comp/sdk-core v2.0.2 and later")},e.prototype.bootstrap=function(){return Promise.resolve()},e.prototype.render=function(){return Promise.resolve()},e.prototype.start=function(){},e.prototype.restart=function(e){return Promise.resolve()},e.prototype.destroy=function(){return Promise.resolve()},e.prototype.update=function(e){return Promise.resolve()},e.prototype.capture=function(){return Promise.resolve(null)},e.containerType="div",e.size={width:0,height:0},e}());vn.size={width:"100%",height:"100%"};var mn=new I({resources:[],concurrency:35,cache:hn,autoPrepare:!1});function yn(e){return a(this,void 0,void 0,(function(){var t,n,i,r;return c(this,(function(o){switch(o.label){case 0:return t=e.scriptUrl,n=e.scriptRetryTimes,i=void 0===n?0:n,r=e.scriptAsync,[4,Yt({retryTimes:i,src:t,async:void 0===r||r})];case 1:return o.sent(),[2,(s=t,window.getPlayableComponent?window.getPlayableComponent(s):Wt[s])]}var s}))}))}function gn(e){var t,n,i,r,s,u,l,h,p,d,f,v,m,y,g,b,_,w,C,S,P,x;return a(this,void 0,void 0,(function(){var E,T,k,O,M,R,j,F,V,A,L,N,B,H,U,q,D,z,J,W,G,Y,X,K,Z,$,Q,ne,ie,re,oe,se,ae,ce,ue,le,he,pe,de,fe,ve,me;return c(this,(function(ye){switch(ye.label){case 0:return E=e.containerSize,T=e.scriptUrl,k=e.resources,O=void 0===k?[]:k,M=e.renderMode,R=e.perfTimeInitial,j=e.contextId,F=void 0===j?ot.raw():j,V=e.config,A=pn(R),L=(null===(t=null==V?void 0:V.pgc)||void 0===t?void 0:t.appIcon)||"",/^http(s)?:\/\//i.test(L)&&-1!==L.indexOf(location.host)&&O.push(L),(N=null!==(u=null===(s=null===(r=null===(i=null===(n=null==V?void 0:V.pgc)||void 0===n?void 0:n.eCommerce)||void 0===i?void 0:i.product)||void 0===r?void 0:r.img_list)||void 0===s?void 0:s[0])&&void 0!==u?u:"")&&O.push(N),B=e.maxConcurrency,H=void 0===B?O.length:B,U={size:E,scriptUrl:T},e.abilities.track=function(e,t){var n=t.scriptUrl,i=t.size,r=i.width+"x"+i.height,s=ot.raw();return function(t,i){if(e)return e(t,o(o(o({render_mode:Tt?"iframe":"normal"},i),{instance_id:s,playable_component_url:n,container_size:r}),$t()));Be.warn("[Ability Missing], track is not present")}}(e.abilities.track,U),e.abilities.trackClick=function(e,t){var n=t.scriptUrl,i=t.size,r=i.width+"x"+i.height;return function(t){if(e)return e(o(o(o({},t),{playable_component_url:n,container_size:r}),$t()));Be.warn("[Ability Missing], trackClick is not present")}}(e.abilities.trackClick,U),q=Math.min(35,Math.max(8,H)),D=new I({resources:O,autoPrepare:!1,concurrency:q,cache:Pt.resourceCacheEnabled&&hn,fetchResource:Tt?function(e){return jt.call("loadResource",e)}:void 0}),z=Promise.resolve(),J="","product"===(null===(h=null===(l=null==V?void 0:V.pgc)||void 0===l?void 0:l.dpa)||void 0===h?void 0:h.type)&&(null===(f=null===(d=null===(p=null==V?void 0:V.pgc)||void 0===p?void 0:p.dpa)||void 0===d?void 0:d.product)||void 0===f?void 0:f.image)&&(J=(J=(null===(y=null===(m=null===(v=null==V?void 0:V.pgc)||void 0===v?void 0:v.dpa)||void 0===m?void 0:m.product)||void 0===y?void 0:y.image)||"").replace(/^http:/i,"https:"),V.pgc.dpa.product.image=J,z=D.load(J)),null===(g=e.abilities)||void 0===g||g.track("mnpl_js_start_load"),X=!1,Tt?W=function(e,t){return a(this,void 0,void 0,(function(){var n,i;return c(this,(function(r){switch(r.label){case 0:return[4,e.loadText(t)];case 1:return n=r.sent(),new Function(n)(),i=window.PlayableComponent,delete window.PlayableComponent,[2,i]}}))}))}(D,T):"iframe"===M?(W=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){return[2,vn]}))}))}(),mn.load(T),X=!0):W=yn(e),K=ee(W),D.resList.length?(null===(b=e.abilities)||void 0===b||b.track("mnpl_resource_start_preload",{resources:D.resList}),(Y=D.preload()).onError((function(e,t){Be.warn("load resource "+e+" failed with reason"),console.error(t)})),(Z=ee(Y)).then((function(){Y.onFinish((function(t,n){var i;null===(i=e.abilities)||void 0===i||i.track("mnpl_resource_finish_preload",{preload_resource_duration:Z.duration,fail_urls:n})}))}))):Y=D.preload(),$=e.loadingFrame,Q=e.__fakeSleep,ie=te(ne=void 0===Q?0:Q),$&&(re=D.resList.length+1,oe=0,se={},Xe($)&&Object.assign(se,$),ae=o(o({},se),{onTap:function(t,n,i){e.abilities.trackClick({clickInfo:n,custom_element_type:"LIGHT_PLAY_LOADING"}),e.abilities.track("mnpl_click_loading_area",{area_tag:i})},container:e.container,containerWidth:e.containerSize.width}),ce=new ln(ae),e.container.appendChild(ce.node),ue=function(){var e=(oe+=1)/re;ce.updatePercent(e),e>=1&&ie.then((function(){Ve(ce.node,"out").then((function(){ce.destroy()}))}))},K.then((function(){ue()})),Y.onProgress((function(){ue()}))),le=at(e.timeout).loadScript,ne>0?[4,ie]:[3,2];case 1:ye.sent(),ye.label=2;case 2:return ye.trys.push([2,4,,5]),[4,K];case 3:return G=ye.sent(),!X&&(null===(_=e.abilities)||void 0===_||_.track("mnpl_js_finish_load",{load_js_duration:K.duration})),le&&K.duration>le&&!X&&(null===(w=e.abilities)||void 0===w||w.track("mnpl_js_load_timeout",{duration:K.duration})),[3,5];case 4:throw he=ye.sent(),!X&&(null===(C=e.abilities)||void 0===C||C.track("mnpl_js_load_error",{message:null!==(S=he.message)&&void 0!==S?S:"load_failed"})),console.error(he),he;case 5:if(pe=A(),de=!1,fe=!1,!z)return[3,11];ye.label=6;case 6:return ye.trys.push([6,10,,11]),[4,z];case 7:return ve=ye.sent(),de=!0,ve?[4,ve.image()]:[3,9];case 8:ye.sent(),fe=!0,ye.label=9;case 9:return[3,11];case 10:throw me=ye.sent(),null===(P=e.abilities)||void 0===P||P.track("mnpl_dpa_image_load_error",{message:null!==(x=me.message)&&void 0!==x?x:"load_dpa_failed",image:J,load_array_buffer_success:Number(de),load_img_success:Number(fe)}),me;case 11:return[2,{loader:D,options:e,component:G,perfTimeFn:A,jsLoadTime:pe,contextId:F}]}}))}))}var bn=n(201),_n=n.n(bn);function wn(e,t){et()(Tt,"Can not create ability proxy out of iframe env.");var n={};return e.forEach((function(e){n[e]=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return jt.call("accessAbility",{name:e,args:n},t)}})),n}var Cn={};function Sn(){jt.registerMethodHandler("loadResource",(function(e){return kn.sharedLoader.loadArrayBuffer(e)})),jt.registerMethodHandler("initialStatus",(function(){return{inView:Pt.inView,adVisible:Pt.adVisible,adVisibleOnce:Pt.adVisibleOnce,expressShowed:Pt.expressShowed,resourceCacheEnabled:Pt.resourceCacheEnabled,useLegacyVisible:Pt.useLegacyVisible,autoCloseTimeout:Pt.autoCloseTimeout,_afterExpressTime:Pt._afterExpressTimeFn()}})),jt.registerMethodHandler("sendTrack",(function(e){return kn.sendTrack(e.label,e.payload)})),jt.registerMethodHandler("getSharedCreateOption",(function(e){var t=function(e){return Cn[e]}(e);return jt.logger.info("opts",e,t),t}))}function Pn(){return a(this,void 0,void 0,(function(){var e,t,n,i,r,a;return c(this,(function(c){switch(c.label){case 0:return jt.registerEventHandler("broadcastEvent",(function(e){var t=e.name,n=e.payload;kn.broadcastEvent(t,n)})),e=window.CONTEXT_ID||ot.raw(),[4,jt.register(e)];case 1:return c.sent(),[4,jt.call("initialStatus")];case 2:return t=c.sent(),n=t._afterExpressTime,i=s(t,["_afterExpressTime"]),Object.assign(Pt,i),Pt._afterExpressTimeFn=pn(n),[4,jt.call("getSharedCreateOption",e)];case 3:return(r=c.sent())&&(a=function(e,t){var n=e.abilities,i=s(e,["abilities"]);return o(o({},i),{contextId:t,abilities:wn(n,t),container:document.querySelector("#root")})}(r,e),kn.create(a)),[2]}}))}))}var xn={iframeHtml:"https://sf3-fe-tos.pglstatp-toutiao.com/obj/goofy/ad/light-play-sdk/release/0.11.0/iframe.bbdbc9c.html"},En=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"isHost",{get:function(){return!Tt},enumerable:!1,configurable:!0}),t.prototype.beforeInit=function(){var t=this;this.registration=[],e.prototype.beforeInit.call(this);var n=this.options.abilities;this.registration.push(function(e,t){return et()(!Tt,"Can not create proxy handler in iframe env."),jt.registerMethodHandler("accessAbility",(function(t){var n,i=t||{};if(e[i.name])return null===(n=e[i.name])||void 0===n?void 0:n.call.apply(n,u([null],i.args));jt.logger.error("Invalid ability access: ",i.name+" is not present in abilities: "+Object.keys(e).join(", ")),null==e||e.track("light_play_uncaught_error",{reason:"invalid_ability_access",calledAbility:i.name,abilities:Object.keys(e)})}),t)}(n,this.contextId));var i,r,a=function(e){e.renderMode;var t,n=e.abilities,i=e.perfTimeFn,r=(e.loader,e.container,s(e,["renderMode","abilities","perfTimeFn","loader","container"])),a=Object.keys(r).filter((function(e){return"function"==typeof r[e]}));return o({abilities:Object.keys(n),perfTimeInitial:null!==(t=null==i?void 0:i())&&void 0!==t?t:0},_n()(r,a))}(this.options);i=this.contextId,r=a,Cn[i]=r,console.log("shared",Cn),this.options.onInterceptClose&&this.registration.push(jt.registerMethodHandler("onInterceptClose",(function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return null===(e=t.options.onInterceptClose)||void 0===e?void 0:e.call.apply(e,u([null],n))}),this.contextId)),this.registration.push(jt.registerEventHandler("proxySelfEvent",(function(e){if(e)switch(e.name){case"onStatusChange":t._setStatus(e.args[0]),e.args[0]===G.error&&t.emit("onStatusChange",G.error);break;default:t.emit.apply(t,u([e.name],e.args))}}),this.contextId)),this.registration.push(jt.registerEventHandler("proxyComponentEvent",(function(e){var n;e&&(n=t.componentEventEmitter).emit.apply(n,u(["componentEvent",e.name],e.args))}),this.contextId)),this.componentEventEmitter.on("hostEvent",(function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];jt.emit("proxyHostEvent",{name:e,args:n},t.contextId)})),this.onStatus("destroyed",(function(){setTimeout((function(){t.destroy()}),600)})),this.options.blankSpaceSendConvert=0},t.prototype.init=function(){e.prototype.init.call(this),this.activityCollector.stopCollect()},t.prototype.prepareVideo=function(){},t.prototype.addPlayIcon=function(){},t.prototype.createElements=function(){this.assertMethod("createElements");var e=document.createElement("iframe");e.src=xn.iframeHtml+"#contextId="+this.contextId;var t=this.options.containerSize;Fe(e,{width:t.width+"px",height:t.height+"px",position:"relative",boxSizing:"border-box",border:"0px",background:"transparent",backgroundColor:"transparent",overflow:"hidden"}),this.innerContainer=e,this.node=e,this.options.container.appendChild(this.node)},t.prototype.bootstrap=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.onStatus("bootstrapped")];case 1:return e.sent(),[2]}}))}))},t.prototype.render=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.isVideo?[4,this.onStatus("rendered")]:[3,2];case 1:return e.sent(),[3,4];case 2:return[4,this.onStatus("pendingRunning")];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))},t.prototype.autoRender=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.waitingTimeFn=Q(),[4,this.onRenderSignal()];case 1:return e.sent(),this.performance.wait_render_signal_time=this.waitingTimeFn(),[4,this.renderStart()];case 2:return e.sent(),[2]}}))}))},t.prototype.renderStart=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.isVideo?[4,this.onRendered()]:[3,2];case 1:return e.sent(),[3,4];case 2:return[4,this.onStatus("running")];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))},t.prototype.prepareRenderSignal=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){return this.emitRenderSignal(),[2]}))}))},t.prototype.destroy=function(){return a(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e.prototype.destroy.call(this)];case 1:return t.sent(),[3,3];case 2:return t.sent(),[3,3];case 3:return this.node.src="about:blank",n=this.contextId,delete Cn[n],jt.unregister(this.contextId),this.registration.forEach((function(e){return e()})),[2]}var n}))}))},t}(Dt),Tn=new(function(){function e(){this.Version="0.11.0-alpha.2",this.HashVersion="bbdbc9c",this.trackerFn=H,this.scriptsMap={},this.errorHandlerListened=!1,this.sharedLoader=mn,this.Loader=I,this.bridge=jt,this.emitter=new Z,this._instances=[],this._loadComponent=yn,this.create=this.create.bind(this),this.broadcastEvent=this.broadcastEvent.bind(this),this.destroy=this.destroy.bind(this),this.handleError=this.handleError.bind(this)}return Object.defineProperty(e.prototype,"iframeHtml",{get:function(){return xn.iframeHtml},set:function(e){xn.iframeHtml=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resourceCacheEnabled",{get:function(){return Pt.resourceCacheEnabled},set:function(e){Pt.resourceCacheEnabled=Boolean(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inView",{get:function(){return Pt.inView},set:function(e){Pt.inView=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expressShow",{get:function(){return Pt.expressShowed},set:function(e){Pt.expressShowed=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoCloseTimeout",{get:function(){return Pt.autoCloseTimeout},set:function(e){Pt.autoCloseTimeout=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adVisible",{get:function(){return this.useLegacyVisible?this.expressShow:Pt.adVisible},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adVisibleOnce",{get:function(){return Pt.adVisibleOnce},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useLegacyVisible",{get:function(){return Pt.useLegacyVisible},set:function(e){Pt.useLegacyVisible=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sendTrack",{get:function(){return this.trackerFn},set:function(e){this.trackerFn=e},enumerable:!1,configurable:!0}),e.prototype.broadcastEvent=function(e,t){if(e===j.a.inViewChange&&(this.inView=Boolean(t)),e===j.a.expressShow&&(this.expressShow||(Pt._afterExpressTimeFn=Q()),this.expressShow=Boolean(t)),e===j.a.resetSDK&&(this.broadcastEvent(j.a.inViewChange,!1),this.broadcastEvent(j.a.expressShow,!1),this.broadcastEvent(j.a.adVisible,!1),Pt.expressShowed=!1,Pt.adVisibleOnce=!1,Pt._afterExpressTimeFn=function(){}),e===j.a.adVisible){var n=Boolean(t);Pt.adVisible=n,n&&(Pt.adVisibleOnce=n)}"host"===jt.bridgeType&&jt.emit("broadcastEvent",{name:e,payload:t}),this.emitter.emit(e,t)},e.prototype.startHandleError=function(){this.errorHandlerListened||(this.errorHandlerListened=!0,window.addEventListener("error",this.handleError),window.addEventListener("unhandledrejection",this.handleError))},e.prototype.stopHandleError=function(){this.errorHandlerListened=!1,window.removeEventListener("error",this.handleError),window.removeEventListener("unhandledrejection",this.handleError)},e.prototype.handleError=function(e){var t;if(t="error"===e.type?e.filename:Object.keys(this.scriptsMap)[0]||"",!this.scriptsMap[t])return!1;var n=e,i=n.lineno,r=n.colno,o=n.message,s=n.reason,a={lineno:i,colno:r,message:o,filename:t};return s.stack&&(a.stack=s.stack),s.message&&(a.message=s.message),"string"==typeof s&&(a.message=s),Tt?jt.call("sendTrack",{label:"mnpl_script_error",payload:a}):this.sendTrack("mnpl_script_error",a),!1},e.prototype.create=function(e){var t,n;return a(this,void 0,void 0,(function(){var i,r,a,u,l,h,p,d,f,v,m,y,g,b,_,w,C,S,P;return c(this,(function(c){switch(c.label){case 0:return c.trys.push([0,5,,6]),"then"in e?[4,e]:[3,2];case 1:return a=c.sent(),[3,4];case 2:return[4,gn(e)];case 3:a=c.sent(),c.label=4;case 4:return i=a,[3,6];case 5:return c.sent(),[2,{node:null,success:!1}];case 6:u=i.options,l=i.component,h=i.jsLoadTime,p=i.perfTimeFn,d=i.loader,f=i.contextId,this.scriptsMap[u.scriptUrl]=!0;try{v=Q(),m=u.playIcon,y=void 0!==m&&m,g=u.renderMode,b=u.abilities,_=s(u,["playIcon","renderMode","abilities"]),w=o(o({contextId:f},_),{abilities:o(o({},b),{supportSafeMediaPlayback:function(){return Boolean(u.supportAdVisibleJsb)}}),subscribe:this.emitter.on.bind(this.emitter),playIcon:y,component:l,loader:d,perfTimeFn:p,defaultMuted:!((null===(t=_.sys_control)||void 0===t?void 0:t.voice_control)===F.d.notMute)}),(r="iframe"===g?new En(w):new Dt(w)).performance.js_load_time=h,r.performance.instance_construct_time=v()}catch(e){return C=(null==e?void 0:e.message)||"construct failed",console.error(e),null===(n=u.abilities)||void 0===n||n.track("light_play_uncaught_error",{_given_id:u.id,reason:C}),[2,{node:null,success:!1,reason:C}]}c.label=7;case 7:return c.trys.push([7,9,,10]),this._instances.push(r),[4,r.autoRender()];case 8:return c.sent(),[2,{node:r.node,instance:r,success:!r.treatAsRenderFail}];case 9:return S=c.sent(),P=r&&r.errorCode,console.error(S),r&&this.destroy([r]),[2,{node:null,success:!1,reason:P||(null==S?void 0:S.message)||"UNKNOWN_REASON"}];case 10:return[2]}}))}))},e.prototype.destroy=function(e){return a(this,void 0,void 0,(function(){var t=this;return c(this,(function(n){switch(n.label){case 0:return[4,Promise.all((e||this._instances).map((function(e){return a(t,void 0,void 0,(function(){var t,n;return c(this,(function(i){switch(i.label){case 0:if(-1!==(t=this._instances.indexOf(e))&&(this._instances[t]=null),!e||!e.destroy)return[3,4];if(!e.destroy)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.destroy()];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),console.error(n),[3,4];case 4:return[2,Promise.resolve()]}}))}))})))];case 1:return n.sent(),this._instances=this._instances.filter(Boolean),[2]}}))}))},e.prototype.remove=function(e){this._instances=this._instances.filter((function(t){return Boolean(t)&&t!==e}))},e.prototype.createEventEmitter=function(){return new Z},e}());Tt?Pn():Sn(),Tn.startHandleError();var kn=t.default=Tn},392:function(e,t,n){"use strict";e.exports=function(e,t,n,i,r,o,s,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,o,s,a],l=0;(c=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},397:function(e,t,n){var i=n(41),r=n(27);e.exports=function(e,t,n){var o=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return r(n)&&(o="leading"in n?!!n.leading:o,s="trailing"in n?!!n.trailing:s),i(e,t,{leading:o,maxWait:t,trailing:s})}}}]);
//# sourceMappingURL=vendors~lp-sdk.js.map