!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){var n=window.navigator.userAgent.toLowerCase();if(!/iphone/.test(n)){var o,a=0,c=0,d=1,s="qka-isWaked",u=window.location.href,p=Q(location.href),l=p.deviceId,f=p.tck_rid_6c8,m=p.slotId,y=t.appId,v=t.activityId,g=t.consumerId,I=+(t.quickapp||{}).launch||0,_=t.pgExtCustomCfg||{},b=_.isTitle||0,k=_.isLoading||0,h=t.activityShortLink?1:0,w=h?t.activityShortLink:u,O=+p.qka,x=+p.qap2||0,S=""===p.qap3?1:+p.qap3,C=p.qap4,T="com.tuiamai.activity";if(t.pgExtCustomCfg&&t.pgExtCustomCfg.pkg)try{var j=JSON.parse(t.pgExtCustomCfg.pkg);T=C&&j[C]||T}catch(e){console.warn("config error")}var A="/ActivityPreview",q=h?{appId:y,activityId:v,slotId:m,consumerId:g,deviceId:l,rid:f,isTitle:b,isLoading:k,qka:O,activityUrl:w,isShortLink:h}:{appId:y,activityId:v,slotId:m,consumerId:g,isTitle:b,isLoading:k,activityUrl:w,isShortLink:h};if(0===S&&(A="/ActivityCoupon",q={appId:y,activityId:v,slotId:m,consumerId:g,deviceId:l,rid:f}),!(localStorage.getItem(s)===f)&&!p.tuia_tag){var E={ready:!1,useQka:!1};if(window.TA.loadBidResult=function(){return E.ready?E.useQka?1:0:-1},J(),5===x){window.TA=window.TA||{},window.TA.QKA=window.TA.QKA||{hideQkaButton:function(){document.getElementById("qka_container").style.zIndex=-99999},showQkaButton:function(){E.ready&&J(),document.getElementById("qka_container").style.zIndex=99999}},window.handleQkaButtonClickEvent=function(){B(1,{launch_times:1,manufacturer:t.brandName?t.brandName.toUpperCase():""}),function(e){var n=Q(location.href);(new Image).src="/statistics/click?consumer_id="+t.consumerId+"&device_id="+n.deviceId+"&app_id="+t.appId+"&slot_id="+n.slotId+"&activity_id="+t.activityId+"&activity_page="+t.activityId+"&dsm="+n.dsm+"&dsm2="+n.dsm2+"&dcm="+n.dcm+"&rid="+n.tck_rid_6c8+"&_m=activity&dpm="+t.appId+".84.".concat(e,".0&program_id=4204440243083493433&_t=")+ +new Date}(E.ready&&E.useQka?698:697),window.handleQkaButtonClickCallback()},q.activityUrl=encodeURIComponent(q.activityUrl);var P='\n        <qa:router-button\n          data-package-name="'.concat(T,'"\n          data-page="').concat(A,"\"\n          data-params='").concat(JSON.stringify(q),'\'\n          data-click-event=\'{"eventName": "handleQkaButtonClickEvent"}\'\n          style="width:100%;height:2000px;position:absolute;"\n        >\n          <templates>\n            <div id="container">\n            </div>\n          </templates>\n          <styles>\n            #container {\n              width: 100%;\n              height: 2000px;\n              background: rgba(0, 0, 0, 0);\n            }\n          </styles>\n        </qa:router-button>\n      '),N=document.createElement("div");N.id="qka_container",N.setAttribute("style","position: fixed; top: 0; right: 0; bottom: 0; left: 0; z-index: -99999;"),N.innerHTML=P,document.body.appendChild(N)}else try{O&&I?e.channelReady?e.channelReady((function(e){U(63,"innerExt02",{activity_id:v,consumer_id:g,device_id:l,referrer:encodeURIComponent(document.referrer),ua:navigator.userAgent,app_id:y,slot_id:m,is_support:e?1:0,os_version:D(),is_launch:I,timestamp:(new Date).getTime()}),localStorage.setItem(s,f),R(),window.requestAnimationFrame(L),M(T,A,q,x)})):U(63,"innerExt02",{activity_id:v,consumer_id:g,device_id:l,referrer:encodeURIComponent(document.referrer),ua:navigator.userAgent,app_id:y,slot_id:m,is_support:0,timestamp:(new Date).getTime()}):B(8)}catch(e){console.log("ðŸš€ ~ file: index.js ~ line 119 ~ error",e),B(13,{error:e.name+":"+e.message})}}}function L(e){void 0===o&&(o=e),e-o>1e3&&(R(),o=e),a<30&&window.requestAnimationFrame(L)}function R(){U(13,"innerExt01",{activity_id:v,consumer_id:g,device_id:l,referrer:encodeURIComponent(document.referrer),ua:navigator.userAgent,app_id:y,slot_id:m,qka:O,rid:f,skin_id:CFG.skinName,timestamp:(new Date).getTime()}),a+=1}function U(e,t,n){var i=[],o={type:e,json:n};Object.keys(o).map((function(e){i.push("".concat(e,"=").concat(encodeURIComponent(JSON.stringify(o[e]))))})),(new Image).src=("https://openlog.tuia.cn/openlog/collect?logName="+t+"&").concat(i.join("&"))}function Q(e){var t={};return e.replace(/([^?&#]+)=([^?&#]+)/g,(function(e,n,i){t[n]=i})),t}function D(){var e=navigator.userAgent,t="";if(e.indexOf("Mac OS X")>-1){t=(e.match(/OS [\d._]*/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".")}else(e.indexOf("Android")>-1||e.indexOf("Linux")>-1)&&(t=e.substr(e.indexOf("Android")+8,e.indexOf(";",e.indexOf("Android"))-e.indexOf("Android")-8));return t.split(".")[0]}function B(e,n){var o=Q(location.href);U(54,"innerExt02",i(i({sub_type:e},{activity_id:t.activityId,consumer_id:t.consumerId,device_id:o.deviceId,referrer:encodeURIComponent(document.referrer),ua:navigator.userAgent,app_id:t.appId,slot_id:o.slotId,qka:void 0===r(o.qka)?0:o.qka,rid:o.tck_rid_6c8,skin_id:t.skinName,timestamp:+new Date}),n))}function M(i,o,r,a){var s,u,p;B(1,{launch_times:1,manufacturer:t.brandName?t.brandName.toUpperCase():""}),d!==a&&(r.isDp=0,e.appRouter&&e.appRouter(i,o,r,""),s=self!==top,u=n&&n.match(/micromessenger/gi),p=u&&n.match(/miniprogram/gi),s&&u&&!p&&window.parent.postMessage(JSON.stringify({eType:"launchQuickApp",options:{appName:i,router:o,params:r}}),"*")),c!==a&&setTimeout((function(){var e=[];r.isDp=1,Object.keys(r).forEach((function(t){e.push(t+"="+encodeURIComponent(r[t]))}));var t=e.join("&"),n="https://hapjs.org/app/"+i+o+"?"+t,a=document.createElement("iframe");a.src=n,document.body.appendChild(a),a.style.display="none"}),100)}function J(){var e,n;if(3===O&&5===x)try{var i=function(){var e=Q(location.href);return{appKey:e.appKey,deviceId:e.deviceId,rid:e.tck_rid_6c8,slotId:e.slotId,id:t.activityId,appId:t.appId,activityId:t.activityId,activityType:t.activityType,styleType:t.styleType||1,couponSkinId:t.couponSkinId,asyncType:1,token:"oVb7vvJgbY1nFxsV",skinType:t.skinName,adxLoadType:e.adxLoadType||"",osversion:e.osversion||"",showVersion:t.isShowNew||!1,skinId:t.couponSkinId,isAdvertLayer:t.isAdvertLayer,thankLayerId:t.thankModalId,appIdExt:t.appId,consumerIdExt:t.consumerId,dpr:window.devicePixelRatio}}(),o=location.href.includes("tuiatest")?"https://activity.tuiatest.cn":location.href.includes("tuia-pre")?"https://activity.tuia-pre.cn":"https://activity.tuia.cn";(e=o+"/activity/quickApplication/bid",n=i,new Promise((function(t,i){var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=function(){if(200===o.status){var e="string"==typeof o.response?JSON.parse(o.response):o.response;e&&e.success?t(e.data):i(e)}else i(Error(o.statusText))},o.onerror=function(){i(Error("Network Error"))};var r="";for(var a in n)r+="".concat(a,"=").concat(n[a],"&");r=r.substring(0,r.length-1),o.send(r)}))).then((function(e){var t;(E.ready=!0,E.useQka=e,e)||(t=document.querySelector("#qka_container"))&&(t.style.zIndex=-99999)}))}catch(e){console.error(e),document.getElementById("qka_container").style.zIndex=99999}}}(window,CFG)}]);